var JSHINT=function(){"use strict";var anonname,bang={"<":true,"<=":true,"==":true,"===":true,"!==":true,"!=":true,">":true,">=":true,"+":true,"-":true,"*":true,"/":true,"%":true},boolOptions={asi:true,bitwise:true,boss:true,browser:true,camelcase:true,couch:true,curly:true,debug:true,devel:true,dojo:true,eqeqeq:true,eqnull:true,es5:true,esnext:true,evil:true,expr:true,forin:true,funcscope:true,globalstrict:true,immed:true,iterator:true,jquery:true,lastsemic:true,latedef:true,laxbreak:true,laxcomma:true,loopfunc:true,mootools:true,multistr:true,newcap:true,noarg:true,node:true,noempty:true,nonew:true,nonstandard:true,nomen:true,onevar:true,onecase:true,passfail:true,plusplus:true,proto:true,prototypejs:true,regexdash:true,regexp:true,rhino:true,undef:true,unused:true,scripturl:true,shadow:true,smarttabs:true,strict:true,sub:true,supernew:true,trailing:true,validthis:true,withstmt:true,white:true,worker:true,wsh:true,yui:true},valOptions={maxlen:false,indent:false,maxerr:false,predef:false,quotmark:false,scope:false,maxstatements:false,maxdepth:false,maxparams:false,maxcomplexity:false},invertedOptions={bitwise:true,forin:true,newcap:true,nomen:true,plusplus:true,regexp:true,undef:true,white:true,eqeqeq:true,onevar:true},renamedOptions={eqeq:"eqeqeq",vars:"onevar",windows:"wsh"},browser={ArrayBuffer:false,ArrayBufferView:false,Audio:false,Blob:false,addEventListener:false,applicationCache:false,atob:false,blur:false,btoa:false,clearInterval:false,clearTimeout:false,close:false,closed:false,DataView:false,DOMParser:false,defaultStatus:false,document:false,event:false,FileReader:false,Float32Array:false,Float64Array:false,FormData:false,focus:false,frames:false,getComputedStyle:false,HTMLElement:false,HTMLAnchorElement:false,HTMLBaseElement:false,HTMLBlockquoteElement:false,HTMLBodyElement:false,HTMLBRElement:false,HTMLButtonElement:false,HTMLCanvasElement:false,HTMLDirectoryElement:false,HTMLDivElement:false,HTMLDListElement:false,HTMLFieldSetElement:false,HTMLFontElement:false,HTMLFormElement:false,HTMLFrameElement:false,HTMLFrameSetElement:false,HTMLHeadElement:false,HTMLHeadingElement:false,HTMLHRElement:false,HTMLHtmlElement:false,HTMLIFrameElement:false,HTMLImageElement:false,HTMLInputElement:false,HTMLIsIndexElement:false,HTMLLabelElement:false,HTMLLayerElement:false,HTMLLegendElement:false,HTMLLIElement:false,HTMLLinkElement:false,HTMLMapElement:false,HTMLMenuElement:false,HTMLMetaElement:false,HTMLModElement:false,HTMLObjectElement:false,HTMLOListElement:false,HTMLOptGroupElement:false,HTMLOptionElement:false,HTMLParagraphElement:false,HTMLParamElement:false,HTMLPreElement:false,HTMLQuoteElement:false,HTMLScriptElement:false,HTMLSelectElement:false,HTMLStyleElement:false,HTMLTableCaptionElement:false,HTMLTableCellElement:false,HTMLTableColElement:false,HTMLTableElement:false,HTMLTableRowElement:false,HTMLTableSectionElement:false,HTMLTextAreaElement:false,HTMLTitleElement:false,HTMLUListElement:false,HTMLVideoElement:false,history:false,Int16Array:false,Int32Array:false,Int8Array:false,Image:false,length:false,localStorage:false,location:false,MessageChannel:false,MessageEvent:false,MessagePort:false,moveBy:false,moveTo:false,MutationObserver:false,name:false,Node:false,NodeFilter:false,navigator:false,onbeforeunload:true,onblur:true,onerror:true,onfocus:true,onload:true,onresize:true,onunload:true,open:false,openDatabase:false,opener:false,Option:false,parent:false,print:false,removeEventListener:false,resizeBy:false,resizeTo:false,screen:false,scroll:false,scrollBy:false,scrollTo:false,sessionStorage:false,setInterval:false,setTimeout:false,SharedWorker:false,status:false,top:false,Uint16Array:false,Uint32Array:false,Uint8Array:false,WebSocket:false,window:false,Worker:false,XMLHttpRequest:false,XMLSerializer:false,XPathEvaluator:false,XPathException:false,XPathExpression:false,XPathNamespace:false,XPathNSResolver:false,XPathResult:false},couch={require:false,respond:false,getRow:false,emit:false,send:false,start:false,sum:false,log:false,exports:false,module:false,provides:false},declared,devel={alert:false,confirm:false,console:false,Debug:false,opera:false,prompt:false},dojo={dojo:false,dijit:false,dojox:false,define:false,require:false},funct,functionicity=["closure","exception","global","label","outer","unused","var"],functions,global,implied,inblock,indent,jsonmode,jquery={$:false,jQuery:false},lines,lookahead,member,membersOnly,mootools={$:false,$$:false,Asset:false,Browser:false,Chain:false,Class:false,Color:false,Cookie:false,Core:false,Document:false,DomReady:false,DOMEvent:false,DOMReady:false,Drag:false,Element:false,Elements:false,Event:false,Events:false,Fx:false,Group:false,Hash:false,HtmlTable:false,Iframe:false,IframeShim:false,InputValidator:false,instanceOf:false,Keyboard:false,Locale:false,Mask:false,MooTools:false,Native:false,Options:false,OverText:false,Request:false,Scroller:false,Slick:false,Slider:false,Sortables:false,Spinner:false,Swiff:false,Tips:false,Type:false,typeOf:false,URI:false,Window:false},nexttoken,node={__filename:false,__dirname:false,Buffer:false,console:false,exports:true,GLOBAL:false,global:false,module:false,process:false,require:false,setTimeout:false,clearTimeout:false,setInterval:false,clearInterval:false},noreach,option,predefined,prereg,prevtoken,prototypejs={$:false,$$:false,$A:false,$F:false,$H:false,$R:false,$break:false,$continue:false,$w:false,Abstract:false,Ajax:false,Class:false,Enumerable:false,Element:false,Event:false,Field:false,Form:false,Hash:false,Insertion:false,ObjectRange:false,PeriodicalExecuter:false,Position:false,Prototype:false,Selector:false,Template:false,Toggle:false,Try:false,Autocompleter:false,Builder:false,Control:false,Draggable:false,Draggables:false,Droppables:false,Effect:false,Sortable:false,SortableObserver:false,Sound:false,Scriptaculous:false},quotmark,rhino={defineClass:false,deserialize:false,gc:false,help:false,importPackage:false,java:false,load:false,loadClass:false,print:false,quit:false,readFile:false,readUrl:false,runCommand:false,seal:false,serialize:false,spawn:false,sync:false,toint32:false,version:false},scope,stack,standard={Array:false,Boolean:false,Date:false,decodeURI:false,decodeURIComponent:false,encodeURI:false,encodeURIComponent:false,Error:false,eval:false,EvalError:false,Function:false,hasOwnProperty:false,isFinite:false,isNaN:false,JSON:false,Map:false,Math:false,NaN:false,Number:false,Object:false,parseInt:false,parseFloat:false,RangeError:false,ReferenceError:false,RegExp:false,Set:false,String:false,SyntaxError:false,TypeError:false,URIError:false,WeakMap:false},nonstandard={escape:false,unescape:false},directive,syntax={},tab,token,unuseds,urls,useESNextSyntax,warnings,worker={importScripts:true,postMessage:true,self:true},wsh={ActiveXObject:true,Enumerator:true,GetObject:true,ScriptEngine:true,ScriptEngineBuildVersion:true,ScriptEngineMajorVersion:true,ScriptEngineMinorVersion:true,VBArray:true,WSH:true,WScript:true,XDomainRequest:true},yui={YUI:false,Y:false,YUI_config:false};var ax,cx,tx,nx,nxg,lx,ix,jx,ft;(function(){ax=/@cc|<\/?|script|\]\s*\]|<\s*!|&lt/i;cx=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/;tx=/^\s*([(){}\[.,:;'"~\?\]#@]|==?=?|\/=(?!(\S*\/[gim]?))|\/(\*(jshint|jslint|members?|global)?|\/)?|\*[\/=]?|\+(?:=|\++)?|-(?:=|-+)?|%=?|&[&=]?|\|[|=]?|>>?>?=?|<([\/=!]|\!(\[|--)?|<=?)?|\^=?|\!=?=?|[a-zA-Z_$][a-zA-Z0-9_$]*|[0-9]+([xX][0-9a-fA-F]+|\.[0-9]*)?([eE][+\-]?[0-9]+)?)/;nx=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/;nxg=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;lx=/\*\//;ix=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/;jx=/^(?:javascript|jscript|ecmascript|vbscript|mocha|livescript)\s*:/i;ft=/^\s*\/\*\s*falls\sthrough\s*\*\/\s*$/})();function F(){}function is_own(object,name){return Object.prototype.hasOwnProperty.call(object,name)}function checkOption(name,t){if(valOptions[name]===undefined&&boolOptions[name]===undefined){warning("Bad option: '"+name+"'.",t)}}function isString(obj){return Object.prototype.toString.call(obj)==="[object String]"}if(typeof Array.isArray!=="function"){Array.isArray=function(o){return Object.prototype.toString.apply(o)==="[object Array]"}}if(!Array.prototype.forEach){Array.prototype.forEach=function(fn,scope){var len=this.length;for(var i=0;i<len;i++){fn.call(scope||this,this[i],i,this)}}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){if(this===null||this===undefined){throw new TypeError}var t=new Object(this);var len=t.length>>>0;if(len===0){return-1}var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!=n){n=0}else if(n!==0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n))}}if(n>=len){return-1}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k}}return-1}}if(typeof Object.create!=="function"){Object.create=function(o){F.prototype=o;return new F}}if(typeof Object.keys!=="function"){Object.keys=function(o){var a=[],k;for(k in o){if(is_own(o,k)){a.push(k)}}return a}}function isAlpha(str){return str>="a"&&str<="z￿"||str>="A"&&str<="Z￿"}function isDigit(str){return str>="0"&&str<="9"}function isIdentifier(token,value){if(!token)return false;if(!token.identifier||token.value!==value)return false;return true}function supplant(str,data){return str.replace(/\{([^{}]*)\}/g,function(a,b){var r=data[b];return typeof r==="string"||typeof r==="number"?r:a})}function combine(t,o){var n;for(n in o){if(is_own(o,n)&&!is_own(JSHINT.blacklist,n)){t[n]=o[n]}}}function updatePredefined(){Object.keys(JSHINT.blacklist).forEach(function(key){delete predefined[key]})}function assume(){if(option.couch){combine(predefined,couch)}if(option.rhino){combine(predefined,rhino)}if(option.prototypejs){combine(predefined,prototypejs)}if(option.node){combine(predefined,node);option.globalstrict=true}if(option.devel){combine(predefined,devel)}if(option.dojo){combine(predefined,dojo)}if(option.browser){combine(predefined,browser)}if(option.nonstandard){combine(predefined,nonstandard)}if(option.jquery){combine(predefined,jquery)}if(option.mootools){combine(predefined,mootools)}if(option.worker){combine(predefined,worker)}if(option.wsh){combine(predefined,wsh)}if(option.esnext){useESNextSyntax()}if(option.globalstrict&&option.strict!==false){option.strict=true}if(option.yui){combine(predefined,yui)}}function quit(message,line,chr){var percentage=Math.floor(line/lines.length*100);throw{name:"JSHintError",line:line,character:chr,message:message+" ("+percentage+"% scanned).",raw:message}}function isundef(scope,m,t,a){return JSHINT.undefs.push([scope,m,t,a])}function warning(m,t,a,b,c,d){var ch,l,w;t=t||nexttoken;if(t.id==="(end)"){t=token}l=t.line||0;ch=t.from||0;w={id:"(error)",raw:m,evidence:lines[l-1]||"",line:l,character:ch,scope:JSHINT.scope,a:a,b:b,c:c,d:d};w.reason=supplant(m,w);JSHINT.errors.push(w);if(option.passfail){quit("Stopping. ",l,ch)}warnings+=1;if(warnings>=option.maxerr){quit("Too many errors.",l,ch)}return w}function warningAt(m,l,ch,a,b,c,d){return warning(m,{line:l,from:ch},a,b,c,d)}function error(m,t,a,b,c,d){warning(m,t,a,b,c,d)}function errorAt(m,l,ch,a,b,c,d){return error(m,{line:l,from:ch},a,b,c,d)}function addInternalSrc(elem,src){var i;i={id:"(internal)",elem:elem,value:src};JSHINT.internals.push(i);return i}var lex=function lex(){var character,from,line,s;function nextLine(){var at,match,tw;if(line>=lines.length)return false;character=1;s=lines[line];line+=1;if(option.smarttabs){match=s.match(/(\/\/)? \t/);at=match&&!match[1]?0:-1}else{at=s.search(/ \t|\t [^\*]/)}if(at>=0)warningAt("Mixed spaces and tabs.",line,at+1);s=s.replace(/\t/g,tab);at=s.search(cx);if(at>=0)warningAt("Unsafe character.",line,at);if(option.maxlen&&option.maxlen<s.length)warningAt("Line too long.",line,s.length);tw=option.trailing&&s.match(/^(.*?)\s+$/);if(tw&&!/^\s+$/.test(s)){warningAt("Trailing whitespace.",line,tw[1].length+1)}return true}function it(type,value){var i,t;function checkName(name){if(!option.proto&&name==="__proto__"){warningAt("The '{a}' property is deprecated.",line,from,name);return}if(!option.iterator&&name==="__iterator__"){warningAt("'{a}' is only available in JavaScript 1.7.",line,from,name);return}var hasDangling=/^(_+.*|.*_+)$/.test(name);if(option.nomen&&hasDangling&&name!=="_"){if(option.node&&token.id!=="."&&/^(__dirname|__filename)$/.test(name))return;warningAt("Unexpected {a} in '{b}'.",line,from,"dangling '_'",name);return}if(option.camelcase){if(name.replace(/^_+/,"").indexOf("_")>-1&&!name.match(/^[A-Z0-9_]*$/)){warningAt("Identifier '{a}' is not in camel case.",line,from,value)}}}if(type==="(color)"||type==="(range)"){t={type:type}}else if(type==="(punctuator)"||type==="(identifier)"&&is_own(syntax,value)){t=syntax[value]||syntax["(error)"]}else{t=syntax[type]}t=Object.create(t);if(type==="(string)"||type==="(range)"){if(!option.scripturl&&jx.test(value)){warningAt("Script URL.",line,from)}}if(type==="(identifier)"){t.identifier=true;checkName(value)}t.value=value;t.line=line;t.character=character;t.from=from;i=t.id;if(i!=="(endline)"){prereg=i&&("(,=:[!&|?{};".indexOf(i.charAt(i.length-1))>=0||i==="return"||i==="case")}return t}return{init:function(source){if(typeof source==="string"){lines=source.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n")}else{lines=source}if(lines[0]&&lines[0].substr(0,2)==="#!")lines[0]="";line=0;nextLine();from=1},range:function(begin,end){var c,value="";from=character;if(s.charAt(0)!==begin){errorAt("Expected '{a}' and instead saw '{b}'.",line,character,begin,s.charAt(0))}for(;;){s=s.slice(1);character+=1;c=s.charAt(0);switch(c){case"":errorAt("Missing '{a}'.",line,character,c);break;case end:s=s.slice(1);character+=1;return it("(range)",value);case"\\":warningAt("Unexpected '{a}'.",line,character,c)}value+=c}},token:function(){var b,c,captures,d,depth,high,i,l,low,q,t,isLiteral,isInRange,n;function match(x){var r=x.exec(s),r1;if(r){l=r[0].length;r1=r[1];c=r1.charAt(0);s=s.substr(l);from=character+l-r1.length;character+=l;return r1}}function string(x){var c,j,r="",allowNewLine=false;if(jsonmode&&x!=='"'){warningAt("Strings must use doublequote.",line,character)}if(option.quotmark){if(option.quotmark==="single"&&x!=="'"){warningAt("Strings must use singlequote.",line,character)}else if(option.quotmark==="double"&&x!=='"'){warningAt("Strings must use doublequote.",line,character)}else if(option.quotmark===true){quotmark=quotmark||x;if(quotmark!==x){warningAt("Mixed double and single quotes.",line,character)}}}function esc(n){var i=parseInt(s.substr(j+1,n),16);j+=n;if(i>=32&&i<=126&&i!==34&&i!==92&&i!==39){warningAt("Unnecessary escapement.",line,character)}character+=n;c=String.fromCharCode(i)}j=0;unclosedString:for(;;){while(j>=s.length){j=0;var cl=line,cf=from;if(!nextLine()){errorAt("Unclosed string.",cl,cf);break unclosedString}if(allowNewLine){allowNewLine=false}else{warningAt("Unclosed string.",cl,cf)}}c=s.charAt(j);if(c===x){character+=1;s=s.substr(j+1);return it("(string)",r,x)}if(c<" "){if(c==="\n"||c==="\r"){break}warningAt("Control character in string: {a}.",line,character+j,s.slice(0,j))}else if(c==="\\"){j+=1;character+=1;c=s.charAt(j);n=s.charAt(j+1);switch(c){case"\\":case'"':case"/":break;case"'":if(jsonmode){warningAt("Avoid \\'.",line,character)}break;case"b":c="\b";break;case"f":c="\f";break;case"n":c="\n";break;case"r":c="\r";break;case"t":c="	";break;case"0":c="\0";if(n>=0&&n<=7&&directive["use strict"]){warningAt("Octal literals are not allowed in strict mode.",line,character)}break;case"u":esc(4);break;case"v":if(jsonmode){warningAt("Avoid \\v.",line,character)}c="";break;case"x":if(jsonmode){warningAt("Avoid \\x-.",line,character)}esc(2);break;case"":allowNewLine=true;if(option.multistr){if(jsonmode){warningAt("Avoid EOL escapement.",line,character)}c="";character-=1;break}warningAt("Bad escapement of EOL. Use option multistr if needed.",line,character);break;case"!":if(s.charAt(j-2)==="<")break;default:warningAt("Bad escapement.",line,character)}}r+=c;character+=1;j+=1}}for(;;){if(!s){return it(nextLine()?"(endline)":"(end)","")}t=match(tx);if(!t){t="";c="";while(s&&s<"!"){s=s.substr(1)}if(s){errorAt("Unexpected '{a}'.",line,character,s.substr(0,1));s=""}}else{if(isAlpha(c)||c==="_"||c==="$"){return it("(identifier)",t)}if(isDigit(c)){if(!isFinite(Number(t))){warningAt("Bad number '{a}'.",line,character,t)}if(isAlpha(s.substr(0,1))){warningAt("Missing space after '{a}'.",line,character,t)}if(c==="0"){d=t.substr(1,1);if(isDigit(d)){if(token.id!=="."){warningAt("Don't use extra leading zeros '{a}'.",line,character,t)}}else if(jsonmode&&(d==="x"||d==="X")){warningAt("Avoid 0x-. '{a}'.",line,character,t)}}if(t.substr(t.length-1)==="."){warningAt("A trailing decimal point can be confused with a dot '{a}'.",line,character,t)}return it("(number)",t)}switch(t){case'"':case"'":return string(t);case"//":s="";token.comment=true;break;case"/*":for(;;){i=s.search(lx);if(i>=0){break}if(!nextLine()){errorAt("Unclosed comment.",line,character)}}s=s.substr(i+2);token.comment=true;break;case"/*members":case"/*member":case"/*jshint":case"/*jslint":case"/*global":case"*/":return{value:t,type:"special",line:line,character:character,from:from};case"":break;case"/":if(s.charAt(0)==="="){errorAt("A regular expression literal can be confused with '/='.",line,from)}if(prereg){depth=0;captures=0;l=0;for(;;){b=true;c=s.charAt(l);l+=1;switch(c){case"":errorAt("Unclosed regular expression.",line,from);return quit("Stopping.",line,from);case"/":if(depth>0){warningAt("{a} unterminated regular expression "+"group(s).",line,from+l,depth)}c=s.substr(0,l-1);q={g:true,i:true,m:true};while(q[s.charAt(l)]===true){q[s.charAt(l)]=false;l+=1}character+=l;s=s.substr(l);q=s.charAt(0);if(q==="/"||q==="*"){errorAt("Confusing regular expression.",line,from)}return it("(regexp)",c);case"\\":c=s.charAt(l);if(c<" "){warningAt("Unexpected control character in regular expression.",line,from+l)}else if(c==="<"){warningAt("Unexpected escaped character '{a}' in regular expression.",line,from+l,c)}l+=1;break;case"(":depth+=1;b=false;if(s.charAt(l)==="?"){l+=1;switch(s.charAt(l)){case":":case"=":case"!":l+=1;break;default:warningAt("Expected '{a}' and instead saw '{b}'.",line,from+l,":",s.charAt(l))}}else{captures+=1}break;case"|":b=false;break;case")":if(depth===0){warningAt("Unescaped '{a}'.",line,from+l,")")}else{depth-=1}break;case" ":q=1;while(s.charAt(l)===" "){l+=1;q+=1}if(q>1){warningAt("Spaces are hard to count. Use {{a}}.",line,from+l,q)}break;case"[":c=s.charAt(l);if(c==="^"){l+=1;if(s.charAt(l)==="]"){errorAt("Unescaped '{a}'.",line,from+l,"^")}}if(c==="]"){warningAt("Empty class.",line,from+l-1)}isLiteral=false;isInRange=false;klass:do{c=s.charAt(l);l+=1;switch(c){case"[":case"^":warningAt("Unescaped '{a}'.",line,from+l,c);if(isInRange){isInRange=false}else{isLiteral=true}break;case"-":if(isLiteral&&!isInRange){isLiteral=false;isInRange=true}else if(isInRange){isInRange=false}else if(s.charAt(l)==="]"){isInRange=true}else{if(option.regexdash!==(l===2||l===3&&s.charAt(1)==="^")){warningAt("Unescaped '{a}'.",line,from+l-1,"-")}isLiteral=true}break;case"]":if(isInRange&&!option.regexdash){warningAt("Unescaped '{a}'.",line,from+l-1,"-")}break klass;case"\\":c=s.charAt(l);if(c<" "){warningAt("Unexpected control character in regular expression.",line,from+l)}else if(c==="<"){warningAt("Unexpected escaped character '{a}' in regular expression.",line,from+l,c)}l+=1;if(/[wsd]/i.test(c)){if(isInRange){warningAt("Unescaped '{a}'.",line,from+l,"-");isInRange=false}isLiteral=false}else if(isInRange){isInRange=false}else{isLiteral=true}break;case"/":warningAt("Unescaped '{a}'.",line,from+l-1,"/");if(isInRange){isInRange=false}else{isLiteral=true}break;case"<":if(isInRange){isInRange=false}else{isLiteral=true}break;default:if(isInRange){isInRange=false}else{isLiteral=true}}}while(c);break;case".":if(option.regexp){warningAt("Insecure '{a}'.",line,from+l,c)}break;case"]":case"?":case"{":case"}":case"+":case"*":warningAt("Unescaped '{a}'.",line,from+l,c)}if(b){switch(s.charAt(l)){case"?":case"+":case"*":l+=1;if(s.charAt(l)==="?"){l+=1}break;case"{":l+=1;c=s.charAt(l);if(c<"0"||c>"9"){warningAt("Expected a number and instead saw '{a}'.",line,from+l,c);break}l+=1;low=+c;for(;;){c=s.charAt(l);if(c<"0"||c>"9"){break}l+=1;low=+c+low*10}high=low;if(c===","){l+=1;high=Infinity;c=s.charAt(l);if(c>="0"&&c<="9"){l+=1;high=+c;for(;;){c=s.charAt(l);if(c<"0"||c>"9"){break}l+=1;high=+c+high*10}}}if(s.charAt(l)!=="}"){warningAt("Expected '{a}' and instead saw '{b}'.",line,from+l,"}",c)}else{l+=1}if(s.charAt(l)==="?"){l+=1}if(low>high){warningAt("'{a}' should not be greater than '{b}'.",line,from+l,low,high)}}}}c=s.substr(0,l-1);character+=l;s=s.substr(l);return it("(regexp)",c)}return it("(punctuator)",t);case"#":return it("(punctuator)",t);default:return it("(punctuator)",t)}}}}}}();function addlabel(t,type,token){if(t==="hasOwnProperty"){warning("'hasOwnProperty' is a really bad name.")}if(type==="exception"){if(is_own(funct["(context)"],t)){if(funct[t]!==true&&!option.node){warning("Value of '{a}' may be overwritten in IE.",nexttoken,t)}}}if(is_own(funct,t)&&!funct["(global)"]){if(funct[t]===true){if(option.latedef)warning("'{a}' was used before it was defined.",nexttoken,t)}else{if(!option.shadow&&type!=="exception"){warning("'{a}' is already defined.",nexttoken,t)}}}funct[t]=type;if(token){funct["(tokens)"][t]=token}if(funct["(global)"]){global[t]=funct;if(is_own(implied,t)){if(option.latedef)warning("'{a}' was used before it was defined.",nexttoken,t);delete implied[t]}}else{scope[t]=funct}}function doOption(){var nt=nexttoken;var o=nt.value;var quotmarkValue=option.quotmark;var predef={};var b,obj,filter,t,tn,v,minus;switch(o){case"*/":error("Unbegun comment.");break;case"/*members":case"/*member":o="/*members";if(!membersOnly){membersOnly={}}obj=membersOnly;option.quotmark=false;break;case"/*jshint":case"/*jslint":obj=option;filter=boolOptions;break;case"/*global":obj=predef;break;default:error("What?")}t=lex.token();loop:for(;;){minus=false;for(;;){if(t.type==="special"&&t.value==="*/"){break loop}if(t.id!=="(endline)"&&t.id!==","){break}t=lex.token()}if(o==="/*global"&&t.value==="-"){minus=true;t=lex.token()}if(t.type!=="(string)"&&t.type!=="(identifier)"&&o!=="/*members"){error("Bad option.",t)}v=lex.token();if(v.id===":"){v=lex.token();if(obj===membersOnly){error("Expected '{a}' and instead saw '{b}'.",t,"*/",":")}if(o==="/*jshint"){checkOption(t.value,t)}var numericVals=["maxstatements","maxparams","maxdepth","maxcomplexity","maxerr","maxlen","indent"];if(numericVals.indexOf(t.value)>-1&&(o==="/*jshint"||o==="/*jslint")){b=+v.value;if(typeof b!=="number"||!isFinite(b)||b<=0||Math.floor(b)!==b){error("Expected a small integer and instead saw '{a}'.",v,v.value)}if(t.value==="indent")obj.white=true;obj[t.value]=b}else if(t.value==="validthis"){if(funct["(global)"]){error("Option 'validthis' can't be used in a global scope.")}else{if(v.value==="true"||v.value==="false")obj[t.value]=v.value==="true";else error("Bad option value.",v)}}else if(t.value==="quotmark"&&o==="/*jshint"){switch(v.value){case"true":obj.quotmark=true;break;case"false":obj.quotmark=false;break;case"double":case"single":obj.quotmark=v.value;break;default:error("Bad option value.",v)}}else if(v.value==="true"||v.value==="false"){if(o==="/*jslint"){tn=renamedOptions[t.value]||t.value;obj[tn]=v.value==="true";if(invertedOptions[tn]!==undefined){obj[tn]=!obj[tn]}}else{obj[t.value]=v.value==="true"}if(t.value==="newcap")obj["(explicitNewcap)"]=true}else{error("Bad option value.",v)}t=lex.token()}else{if(o==="/*jshint"||o==="/*jslint"){error("Missing option value.",t)}obj[t.value]=false;if(o==="/*global"&&minus===true){JSHINT.blacklist[t.value]=t.value;updatePredefined()}t=v}}if(o==="/*members"){option.quotmark=quotmarkValue}combine(predefined,predef);for(var key in predef){if(is_own(predef,key)){declared[key]=nt}}if(filter){assume()}}function peek(p){var i=p||0,j=0,t;while(j<=i){t=lookahead[j];if(!t){t=lookahead[j]=lex.token()}j+=1}return t}function advance(id,t){switch(token.id){case"(number)":if(nexttoken.id==="."){warning("A dot following a number can be confused with a decimal point.",token)}break;case"-":if(nexttoken.id==="-"||nexttoken.id==="--"){warning("Confusing minusses.")}break;case"+":if(nexttoken.id==="+"||nexttoken.id==="++"){warning("Confusing plusses.")}break}if(token.type==="(string)"||token.identifier){anonname=token.value}if(id&&nexttoken.id!==id){if(t){if(nexttoken.id==="(end)"){warning("Unmatched '{a}'.",t,t.id)}else{warning("Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",nexttoken,id,t.id,t.line,nexttoken.value)}}else if(nexttoken.type!=="(identifier)"||nexttoken.value!==id){warning("Expected '{a}' and instead saw '{b}'.",nexttoken,id,nexttoken.value)}}prevtoken=token;token=nexttoken;for(;;){nexttoken=lookahead.shift()||lex.token();if(nexttoken.id==="(end)"||nexttoken.id==="(error)"){return}if(nexttoken.type==="special"){doOption()}else{if(nexttoken.id!=="(endline)"){break}}}}function expression(rbp,initial){var left,isArray=false,isObject=false;if(nexttoken.id==="(end)")error("Unexpected early end of program.",token);advance();if(initial){anonname="anonymous";funct["(verb)"]=token.value}if(initial===true&&token.fud){left=token.fud()}else{if(token.nud){left=token.nud()}else{if(nexttoken.type==="(number)"&&token.id==="."){warning("A leading decimal point can be confused with a dot: '.{a}'.",token,nexttoken.value);advance();return token}else{error("Expected an identifier and instead saw '{a}'.",token,token.id)}}while(rbp<nexttoken.lbp){isArray=token.value==="Array";isObject=token.value==="Object";if(left&&(left.value||left.first&&left.first.value)){if(left.value!=="new"||left.first&&left.first.value&&left.first.value==="."){isArray=false;if(left.value!==token.value){isObject=false}}}advance();if(isArray&&token.id==="("&&nexttoken.id===")")warning("Use the array literal notation [].",token);if(isObject&&token.id==="("&&nexttoken.id===")")warning("Use the object literal notation {}.",token);if(token.led){left=token.led(left)}else{error("Expected an operator and instead saw '{a}'.",token,token.id)}}}return left}function adjacent(left,right){left=left||token;right=right||nexttoken;if(option.white){if(left.character!==right.from&&left.line===right.line){left.from+=left.character-left.from;warning("Unexpected space after '{a}'.",left,left.value)}}}function nobreak(left,right){left=left||token;right=right||nexttoken;if(option.white&&(left.character!==right.from||left.line!==right.line)){warning("Unexpected space before '{a}'.",right,right.value)}}function nospace(left,right){left=left||token;right=right||nexttoken;if(option.white&&!left.comment){if(left.line===right.line){adjacent(left,right)}}}function nonadjacent(left,right){if(option.white){left=left||token;right=right||nexttoken;if(left.value===";"&&right.value===";"){return}if(left.line===right.line&&left.character===right.from){left.from+=left.character-left.from;warning("Missing space after '{a}'.",left,left.value)}}}function nobreaknonadjacent(left,right){left=left||token;right=right||nexttoken;if(!option.laxbreak&&left.line!==right.line){warning("Bad line breaking before '{a}'.",right,right.id)}else if(option.white){left=left||token;right=right||nexttoken;if(left.character===right.from){left.from+=left.character-left.from;warning("Missing space after '{a}'.",left,left.value)}}}function indentation(bias){var i;if(option.white&&nexttoken.id!=="(end)"){i=indent+(bias||0);if(nexttoken.from!==i){warning("Expected '{a}' to have an indentation at {b} instead at {c}.",nexttoken,nexttoken.value,i,nexttoken.from)}}}function nolinebreak(t){t=t||token;if(t.line!==nexttoken.line){warning("Line breaking error '{a}'.",t,t.value)}}function comma(){if(token.line!==nexttoken.line){if(!option.laxcomma){if(comma.first){warning("Comma warnings can be turned off with 'laxcomma'");comma.first=false}warning("Bad line breaking before '{a}'.",token,nexttoken.id)}}else if(!token.comment&&token.character!==nexttoken.from&&option.white){token.from+=token.character-token.from;warning("Unexpected space after '{a}'.",token,token.value)}advance(",");nonadjacent(token,nexttoken)}function symbol(s,p){var x=syntax[s];if(!x||typeof x!=="object"){syntax[s]=x={id:s,lbp:p,value:s}}return x}function delim(s){return symbol(s,0)}function stmt(s,f){var x=delim(s);x.identifier=x.reserved=true;x.fud=f;return x}function blockstmt(s,f){var x=stmt(s,f);x.block=true;return x}function reserveName(x){var c=x.id.charAt(0);if(c>="a"&&c<="z"||c>="A"&&c<="Z"){x.identifier=x.reserved=true}return x}function prefix(s,f){var x=symbol(s,150);reserveName(x);x.nud=typeof f==="function"?f:function(){this.right=expression(150);this.arity="unary";if(this.id==="++"||this.id==="--"){if(option.plusplus){warning("Unexpected use of '{a}'.",this,this.id)}else if((!this.right.identifier||this.right.reserved)&&this.right.id!=="."&&this.right.id!=="["){warning("Bad operand.",this)}}return this};return x}function type(s,f){var x=delim(s);x.type=s;x.nud=f;return x}function reserve(s,f){var x=type(s,f);x.identifier=x.reserved=true;return x}function reservevar(s,v){return reserve(s,function(){if(typeof v==="function"){v(this)}return this})}function infix(s,f,p,w){var x=symbol(s,p);reserveName(x);x.led=function(left){if(!w){nobreaknonadjacent(prevtoken,token);nonadjacent(token,nexttoken)}if(s==="in"&&left.id==="!"){warning("Confusing use of '{a}'.",left,"!")}if(typeof f==="function"){return f(left,this)}else{this.left=left;this.right=expression(p);return this}};return x}function relation(s,f){var x=symbol(s,100);x.led=function(left){nobreaknonadjacent(prevtoken,token);nonadjacent(token,nexttoken);var right=expression(100);if(isIdentifier(left,"NaN")||isIdentifier(right,"NaN")){warning("Use the isNaN function to compare with NaN.",this)}else if(f){f.apply(this,[left,right])}if(left.id==="!"){warning("Confusing use of '{a}'.",left,"!")}if(right.id==="!"){warning("Confusing use of '{a}'.",right,"!")}this.left=left;this.right=right;return this};return x}function isPoorRelation(node){return node&&(node.type==="(number)"&&+node.value===0||node.type==="(string)"&&node.value===""||node.type==="null"&&!option.eqnull||node.type==="true"||node.type==="false"||node.type==="undefined")}function assignop(s){symbol(s,20).exps=true;return infix(s,function(left,that){that.left=left;if(predefined[left.value]===false&&scope[left.value]["(global)"]===true){warning("Read only.",left)}else if(left["function"]){warning("'{a}' is a function.",left,left.value)}if(left){if(option.esnext&&funct[left.value]==="const"){warning("Attempting to override '{a}' which is a constant",left,left.value)}if(left.id==="."||left.id==="["){if(!left.left||left.left.value==="arguments"){warning("Bad assignment.",that)}that.right=expression(19);return that}else if(left.identifier&&!left.reserved){if(funct[left.value]==="exception"){warning("Do not assign to the exception parameter.",left)}that.right=expression(19);return that}if(left===syntax["function"]){warning("Expected an identifier in an assignment and instead saw a function invocation.",token)}}error("Bad assignment.",that)},20)}function bitwise(s,f,p){var x=symbol(s,p);reserveName(x);x.led=typeof f==="function"?f:function(left){if(option.bitwise){warning("Unexpected use of '{a}'.",this,this.id)}this.left=left;this.right=expression(p);return this};return x}function bitwiseassignop(s){symbol(s,20).exps=true;return infix(s,function(left,that){if(option.bitwise){warning("Unexpected use of '{a}'.",that,that.id)}nonadjacent(prevtoken,token);nonadjacent(token,nexttoken);if(left){if(left.id==="."||left.id==="["||left.identifier&&!left.reserved){expression(19);return that}if(left===syntax["function"]){warning("Expected an identifier in an assignment, and instead saw a function invocation.",token)
}return that}error("Bad assignment.",that)},20)}function suffix(s){var x=symbol(s,150);x.led=function(left){if(option.plusplus){warning("Unexpected use of '{a}'.",this,this.id)}else if((!left.identifier||left.reserved)&&left.id!=="."&&left.id!=="["){warning("Bad operand.",this)}this.left=left;return this};return x}function optionalidentifier(fnparam){if(nexttoken.identifier){advance();if(token.reserved&&!option.es5){if(!fnparam||token.value!=="undefined"){warning("Expected an identifier and instead saw '{a}' (a reserved word).",token,token.id)}}return token.value}}function identifier(fnparam){var i=optionalidentifier(fnparam);if(i){return i}if(token.id==="function"&&nexttoken.id==="("){warning("Missing name in function declaration.")}else{error("Expected an identifier and instead saw '{a}'.",nexttoken,nexttoken.value)}}function reachable(s){var i=0,t;if(nexttoken.id!==";"||noreach){return}for(;;){t=peek(i);if(t.reach){return}if(t.id!=="(endline)"){if(t.id==="function"){if(!option.latedef){break}warning("Inner functions should be listed at the top of the outer function.",t);break}warning("Unreachable '{a}' after '{b}'.",t,t.value,s);break}i+=1}}function statement(noindent){var i=indent,r,s=scope,t=nexttoken;if(t.id===";"){advance(";");return}if(t.identifier&&!t.reserved&&peek().id===":"){advance();advance(":");scope=Object.create(s);addlabel(t.value,"label");if(!nexttoken.labelled&&nexttoken.value!=="{"){warning("Label '{a}' on {b} statement.",nexttoken,t.value,nexttoken.value)}if(jx.test(t.value+":")){warning("Label '{a}' looks like a javascript url.",t,t.value)}nexttoken.label=t.value;t=nexttoken}if(t.id==="{"){block(true,true);return}if(!noindent){indentation()}r=expression(0,true);if(!t.block){if(!option.expr&&(!r||!r.exps)){warning("Expected an assignment or function call and instead saw an expression.",token)}else if(option.nonew&&r.id==="("&&r.left.id==="new"){warning("Do not use 'new' for side effects.",t)}if(nexttoken.id===","){return comma()}if(nexttoken.id!==";"){if(!option.asi){if(!option.lastsemic||nexttoken.id!=="}"||nexttoken.line!==token.line){warningAt("Missing semicolon.",token.line,token.character)}}}else{adjacent(token,nexttoken);advance(";");nonadjacent(token,nexttoken)}}indent=i;scope=s;return r}function statements(startLine){var a=[],p;while(!nexttoken.reach&&nexttoken.id!=="(end)"){if(nexttoken.id===";"){p=peek();if(!p||p.id!=="("){warning("Unnecessary semicolon.")}advance(";")}else{a.push(statement(startLine===nexttoken.line))}}return a}function directives(){var i,p,pn;for(;;){if(nexttoken.id==="(string)"){p=peek(0);if(p.id==="(endline)"){i=1;do{pn=peek(i);i=i+1}while(pn.id==="(endline)");if(pn.id!==";"){if(pn.id!=="(string)"&&pn.id!=="(number)"&&pn.id!=="(regexp)"&&pn.identifier!==true&&pn.id!=="}"){break}warning("Missing semicolon.",nexttoken)}else{p=pn}}else if(p.id==="}"){warning("Missing semicolon.",p)}else if(p.id!==";"){break}indentation();advance();if(directive[token.value]){warning('Unnecessary directive "{a}".',token,token.value)}if(token.value==="use strict"){if(!option["(explicitNewcap)"])option.newcap=true;option.undef=true}directive[token.value]=true;if(p.id===";"){advance(";")}continue}break}}function block(ordinary,stmt,isfunc){var a,b=inblock,old_indent=indent,m,s=scope,t,line,d;inblock=ordinary;if(!ordinary||!option.funcscope)scope=Object.create(scope);nonadjacent(token,nexttoken);t=nexttoken;var metrics=funct["(metrics)"];metrics.nestedBlockDepth+=1;metrics.verifyMaxNestedBlockDepthPerFunction();if(nexttoken.id==="{"){advance("{");line=token.line;if(nexttoken.id!=="}"){indent+=option.indent;while(!ordinary&&nexttoken.from>indent){indent+=option.indent}if(isfunc){m={};for(d in directive){if(is_own(directive,d)){m[d]=directive[d]}}directives();if(option.strict&&funct["(context)"]["(global)"]){if(!m["use strict"]&&!directive["use strict"]){warning('Missing "use strict" statement.')}}}a=statements(line);metrics.statementCount+=a.length;if(isfunc){directive=m}indent-=option.indent;if(line!==nexttoken.line){indentation()}}else if(line!==nexttoken.line){indentation()}advance("}",t);indent=old_indent}else if(!ordinary){error("Expected '{a}' and instead saw '{b}'.",nexttoken,"{",nexttoken.value)}else{if(!stmt||option.curly)warning("Expected '{a}' and instead saw '{b}'.",nexttoken,"{",nexttoken.value);noreach=true;indent+=option.indent;a=[statement(nexttoken.line===token.line)];indent-=option.indent;noreach=false}funct["(verb)"]=null;if(!ordinary||!option.funcscope)scope=s;inblock=b;if(ordinary&&option.noempty&&(!a||a.length===0)){warning("Empty block.")}metrics.nestedBlockDepth-=1;return a}function countMember(m){if(membersOnly&&typeof membersOnly[m]!=="boolean"){warning("Unexpected /*member '{a}'.",token,m)}if(typeof member[m]==="number"){member[m]+=1}else{member[m]=1}}function note_implied(token){var name=token.value,line=token.line,a=implied[name];if(typeof a==="function"){a=false}if(!a){a=[line];implied[name]=a}else if(a[a.length-1]!==line){a.push(line)}}type("(number)",function(){return this});type("(string)",function(){return this});syntax["(identifier)"]={type:"(identifier)",lbp:0,identifier:true,nud:function(){var v=this.value,s=scope[v],f;if(typeof s==="function"){s=undefined}else if(typeof s==="boolean"){f=funct;funct=functions[0];addlabel(v,"var");s=funct;funct=f}if(funct===s){switch(funct[v]){case"unused":funct[v]="var";break;case"unction":funct[v]="function";this["function"]=true;break;case"function":this["function"]=true;break;case"label":warning("'{a}' is a statement label.",token,v);break}}else if(funct["(global)"]){if(option.undef&&typeof predefined[v]!=="boolean"){if(!(anonname==="typeof"||anonname==="delete")||nexttoken&&(nexttoken.value==="."||nexttoken.value==="[")){isundef(funct,"'{a}' is not defined.",token,v)}}note_implied(token)}else{switch(funct[v]){case"closure":case"function":case"var":case"unused":warning("'{a}' used out of scope.",token,v);break;case"label":warning("'{a}' is a statement label.",token,v);break;case"outer":case"global":break;default:if(s===true){funct[v]=true}else if(s===null){warning("'{a}' is not allowed.",token,v);note_implied(token)}else if(typeof s!=="object"){if(option.undef){if(!(anonname==="typeof"||anonname==="delete")||nexttoken&&(nexttoken.value==="."||nexttoken.value==="[")){isundef(funct,"'{a}' is not defined.",token,v)}}funct[v]=true;note_implied(token)}else{switch(s[v]){case"function":case"unction":this["function"]=true;s[v]="closure";funct[v]=s["(global)"]?"global":"outer";break;case"var":case"unused":s[v]="closure";funct[v]=s["(global)"]?"global":"outer";break;case"closure":funct[v]=s["(global)"]?"global":"outer";break;case"label":warning("'{a}' is a statement label.",token,v)}}}}return this},led:function(){error("Expected an operator and instead saw '{a}'.",nexttoken,nexttoken.value)}};type("(regexp)",function(){return this});delim("(endline)");delim("(begin)");delim("(end)").reach=true;delim("</").reach=true;delim("<!");delim("<!--");delim("-->");delim("(error)").reach=true;delim("}").reach=true;delim(")");delim("]");delim('"').reach=true;delim("'").reach=true;delim(";");delim(":").reach=true;delim(",");delim("#");delim("@");reserve("else");reserve("case").reach=true;reserve("catch");reserve("default").reach=true;reserve("finally");reservevar("arguments",function(x){if(directive["use strict"]&&funct["(global)"]){warning("Strict violation.",x)}});reservevar("eval");reservevar("false");reservevar("Infinity");reservevar("null");reservevar("this",function(x){if(directive["use strict"]&&!option.validthis&&(funct["(statement)"]&&funct["(name)"].charAt(0)>"Z"||funct["(global)"])){warning("Possible strict violation.",x)}});reservevar("true");reservevar("undefined");assignop("=","assign",20);assignop("+=","assignadd",20);assignop("-=","assignsub",20);assignop("*=","assignmult",20);assignop("/=","assigndiv",20).nud=function(){error("A regular expression literal can be confused with '/='.")};assignop("%=","assignmod",20);bitwiseassignop("&=","assignbitand",20);bitwiseassignop("|=","assignbitor",20);bitwiseassignop("^=","assignbitxor",20);bitwiseassignop("<<=","assignshiftleft",20);bitwiseassignop(">>=","assignshiftright",20);bitwiseassignop(">>>=","assignshiftrightunsigned",20);infix("?",function(left,that){that.left=left;that.right=expression(10);advance(":");that["else"]=expression(10);return that},30);infix("||","or",40);infix("&&","and",50);bitwise("|","bitor",70);bitwise("^","bitxor",80);bitwise("&","bitand",90);relation("==",function(left,right){var eqnull=option.eqnull&&(left.value==="null"||right.value==="null");if(!eqnull&&option.eqeqeq)warning("Expected '{a}' and instead saw '{b}'.",this,"===","==");else if(isPoorRelation(left))warning("Use '{a}' to compare with '{b}'.",this,"===",left.value);else if(isPoorRelation(right))warning("Use '{a}' to compare with '{b}'.",this,"===",right.value);return this});relation("===");relation("!=",function(left,right){var eqnull=option.eqnull&&(left.value==="null"||right.value==="null");if(!eqnull&&option.eqeqeq){warning("Expected '{a}' and instead saw '{b}'.",this,"!==","!=")}else if(isPoorRelation(left)){warning("Use '{a}' to compare with '{b}'.",this,"!==",left.value)}else if(isPoorRelation(right)){warning("Use '{a}' to compare with '{b}'.",this,"!==",right.value)}return this});relation("!==");relation("<");relation(">");relation("<=");relation(">=");bitwise("<<","shiftleft",120);bitwise(">>","shiftright",120);bitwise(">>>","shiftrightunsigned",120);infix("in","in",120);infix("instanceof","instanceof",120);infix("+",function(left,that){var right=expression(130);if(left&&right&&left.id==="(string)"&&right.id==="(string)"){left.value+=right.value;left.character=right.character;if(!option.scripturl&&jx.test(left.value)){warning("JavaScript URL.",left)}return left}that.left=left;that.right=right;return that},130);prefix("+","num");prefix("+++",function(){warning("Confusing pluses.");this.right=expression(150);this.arity="unary";return this});infix("+++",function(left){warning("Confusing pluses.");this.left=left;this.right=expression(130);return this},130);infix("-","sub",130);prefix("-","neg");prefix("---",function(){warning("Confusing minuses.");this.right=expression(150);this.arity="unary";return this});infix("---",function(left){warning("Confusing minuses.");this.left=left;this.right=expression(130);return this},130);infix("*","mult",140);infix("/","div",140);infix("%","mod",140);suffix("++","postinc");prefix("++","preinc");syntax["++"].exps=true;suffix("--","postdec");prefix("--","predec");syntax["--"].exps=true;prefix("delete",function(){var p=expression(0);if(!p||p.id!=="."&&p.id!=="["){warning("Variables should not be deleted.")}this.first=p;return this}).exps=true;prefix("~",function(){if(option.bitwise){warning("Unexpected '{a}'.",this,"~")}expression(150);return this});prefix("!",function(){this.right=expression(150);this.arity="unary";if(bang[this.right.id]===true){warning("Confusing use of '{a}'.",this,"!")}return this});prefix("typeof","typeof");prefix("new",function(){var c=expression(155),i;if(c&&c.id!=="function"){if(c.identifier){c["new"]=true;switch(c.value){case"Number":case"String":case"Boolean":case"Math":case"JSON":warning("Do not use {a} as a constructor.",prevtoken,c.value);break;case"Function":if(!option.evil){warning("The Function constructor is eval.")}break;case"Date":case"RegExp":break;default:if(c.id!=="function"){i=c.value.substr(0,1);if(option.newcap&&(i<"A"||i>"Z")&&!is_own(global,c.value)){warning("A constructor name should start with an uppercase letter.",token)}}}}else{if(c.id!=="."&&c.id!=="["&&c.id!=="("){warning("Bad constructor.",token)}}}else{if(!option.supernew)warning("Weird construction. Delete 'new'.",this)}adjacent(token,nexttoken);if(nexttoken.id!=="("&&!option.supernew){warning("Missing '()' invoking a constructor.",token,token.value)}this.first=c;return this});syntax["new"].exps=true;prefix("void").exps=true;infix(".",function(left,that){adjacent(prevtoken,token);nobreak();var m=identifier();if(typeof m==="string"){countMember(m)}that.left=left;that.right=m;if(left&&left.value==="arguments"&&(m==="callee"||m==="caller")){if(option.noarg)warning("Avoid arguments.{a}.",left,m);else if(directive["use strict"])error("Strict violation.")}else if(!option.evil&&left&&left.value==="document"&&(m==="write"||m==="writeln")){warning("document.write can be a form of eval.",left)}if(!option.evil&&(m==="eval"||m==="execScript")){warning("eval is evil.")}return that},160,true);infix("(",function(left,that){if(prevtoken.id!=="}"&&prevtoken.id!==")"){nobreak(prevtoken,token)}nospace();if(option.immed&&!left.immed&&left.id==="function"){warning("Wrap an immediate function invocation in parentheses "+"to assist the reader in understanding that the expression "+"is the result of a function, and not the function itself.")}var n=0,p=[];if(left){if(left.type==="(identifier)"){if(left.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)){if("Number String Boolean Date Object".indexOf(left.value)===-1){if(left.value==="Math"){warning("Math is not a function.",left)}else if(option.newcap){warning("Missing 'new' prefix when invoking a constructor.",left)}}}}}if(nexttoken.id!==")"){for(;;){p[p.length]=expression(10);n+=1;if(nexttoken.id!==","){break}comma()}}advance(")");nospace(prevtoken,token);if(typeof left==="object"){if(left.value==="parseInt"&&n===1){warning("Missing radix parameter.",token)}if(!option.evil){if(left.value==="eval"||left.value==="Function"||left.value==="execScript"){warning("eval is evil.",left);if(p[0]&&[0].id==="(string)"){addInternalSrc(left,p[0].value)}}else if(p[0]&&p[0].id==="(string)"&&(left.value==="setTimeout"||left.value==="setInterval")){warning("Implied eval is evil. Pass a function instead of a string.",left);addInternalSrc(left,p[0].value)}else if(p[0]&&p[0].id==="(string)"&&left.value==="."&&left.left.value==="window"&&(left.right==="setTimeout"||left.right==="setInterval")){warning("Implied eval is evil. Pass a function instead of a string.",left);addInternalSrc(left,p[0].value)}}if(!left.identifier&&left.id!=="."&&left.id!=="["&&left.id!=="("&&left.id!=="&&"&&left.id!=="||"&&left.id!=="?"){warning("Bad invocation.",left)}}that.left=left;return that},155,true).exps=true;prefix("(",function(){nospace();if(nexttoken.id==="function"){nexttoken.immed=true}var v=expression(0);advance(")",this);nospace(prevtoken,token);if(option.immed&&v.id==="function"){if(nexttoken.id!=="("&&(nexttoken.id!=="."||peek().value!=="call"&&peek().value!=="apply")){warning("Do not wrap function literals in parens unless they are to be immediately invoked.",this)}}return v});infix("[",function(left,that){nobreak(prevtoken,token);nospace();var e=expression(0),s;if(e&&e.type==="(string)"){if(!option.evil&&(e.value==="eval"||e.value==="execScript")){warning("eval is evil.",that)}countMember(e.value);if(!option.sub&&ix.test(e.value)){s=syntax[e.value];if(!s||!s.reserved){warning("['{a}'] is better written in dot notation.",prevtoken,e.value)}}}advance("]",that);nospace(prevtoken,token);that.left=left;that.right=e;return that},160,true);prefix("[",function(){var b=token.line!==nexttoken.line;this.first=[];if(b){indent+=option.indent;if(nexttoken.from===indent+option.indent){indent+=option.indent}}while(nexttoken.id!=="(end)"){while(nexttoken.id===","){if(!option.es5)warning("Extra comma.");advance(",")}if(nexttoken.id==="]"){break}if(b&&token.line!==nexttoken.line){indentation()}this.first.push(expression(10));if(nexttoken.id===","){comma();if(nexttoken.id==="]"&&!option.es5){warning("Extra comma.",token);break}}else{break}}if(b){indent-=option.indent;indentation()}advance("]",this);return this},160);function property_name(){var id=optionalidentifier(true);if(!id){if(nexttoken.id==="(string)"){id=nexttoken.value;advance()}else if(nexttoken.id==="(number)"){id=nexttoken.value.toString();advance()}}return id}function functionparams(){var next=nexttoken;var params=[];var ident;advance("(");nospace();if(nexttoken.id===")"){advance(")");return}for(;;){ident=identifier(true);params.push(ident);addlabel(ident,"unused",token);if(nexttoken.id===","){comma()}else{advance(")",next);nospace(prevtoken,token);return params}}}function doFunction(name,statement){var f;var oldOption=option;var oldScope=scope;option=Object.create(option);scope=Object.create(scope);funct={"(name)":name||'"'+anonname+'"',"(line)":nexttoken.line,"(character)":nexttoken.character,"(context)":funct,"(breakage)":0,"(loopage)":0,"(metrics)":createMetrics(nexttoken),"(scope)":scope,"(statement)":statement,"(tokens)":{}};f=funct;token.funct=funct;functions.push(funct);if(name){addlabel(name,"function")}funct["(params)"]=functionparams();funct["(metrics)"].verifyMaxParametersPerFunction(funct["(params)"]);block(false,false,true);funct["(metrics)"].verifyMaxStatementsPerFunction();funct["(metrics)"].verifyMaxComplexityPerFunction();scope=oldScope;option=oldOption;funct["(last)"]=token.line;funct["(lastcharacter)"]=token.character;funct=funct["(context)"];return f}function createMetrics(functionStartToken){return{statementCount:0,nestedBlockDepth:-1,ComplexityCount:1,verifyMaxStatementsPerFunction:function(){if(option.maxstatements&&this.statementCount>option.maxstatements){var message="Too many statements per function ("+this.statementCount+").";warning(message,functionStartToken)}},verifyMaxParametersPerFunction:function(params){params=params||[];if(option.maxparams&&params.length>option.maxparams){var message="Too many parameters per function ("+params.length+").";warning(message,functionStartToken)}},verifyMaxNestedBlockDepthPerFunction:function(){if(option.maxdepth&&this.nestedBlockDepth>0&&this.nestedBlockDepth===option.maxdepth+1){var message="Blocks are nested too deeply ("+this.nestedBlockDepth+").";warning(message)}},verifyMaxComplexityPerFunction:function(){var max=option.maxcomplexity;var cc=this.ComplexityCount;if(max&&cc>max){var message="Cyclomatic complexity is too high per function ("+cc+").";warning(message,functionStartToken)}}}}function increaseComplexityCount(){funct["(metrics)"].ComplexityCount+=1}(function(x){x.nud=function(){var b,f,i,p,t;var props={};function saveProperty(name,token){if(props[name]&&is_own(props,name))warning("Duplicate member '{a}'.",nexttoken,i);else props[name]={};props[name].basic=true;props[name].basicToken=token}function saveSetter(name,token){if(props[name]&&is_own(props,name)){if(props[name].basic||props[name].setter)warning("Duplicate member '{a}'.",nexttoken,i)}else{props[name]={}}props[name].setter=true;props[name].setterToken=token}function saveGetter(name){if(props[name]&&is_own(props,name)){if(props[name].basic||props[name].getter)warning("Duplicate member '{a}'.",nexttoken,i)}else{props[name]={}}props[name].getter=true;props[name].getterToken=token}b=token.line!==nexttoken.line;if(b){indent+=option.indent;if(nexttoken.from===indent+option.indent){indent+=option.indent}}for(;;){if(nexttoken.id==="}"){break}if(b){indentation()}if(nexttoken.value==="get"&&peek().id!==":"){advance("get");if(!option.es5){error("get/set are ES5 features.")}i=property_name();if(!i){error("Missing property name.")}saveGetter(i);t=nexttoken;adjacent(token,nexttoken);f=doFunction();p=f["(params)"];if(p){warning("Unexpected parameter '{a}' in get {b} function.",t,p[0],i)}adjacent(token,nexttoken)}else if(nexttoken.value==="set"&&peek().id!==":"){advance("set");if(!option.es5){error("get/set are ES5 features.")}i=property_name();if(!i){error("Missing property name.")}saveSetter(i,nexttoken);t=nexttoken;adjacent(token,nexttoken);f=doFunction();p=f["(params)"];if(!p||p.length!==1){warning("Expected a single parameter in set {a} function.",t,i)}}else{i=property_name();saveProperty(i,nexttoken);if(typeof i!=="string"){break}advance(":");nonadjacent(token,nexttoken);expression(10)}countMember(i);if(nexttoken.id===","){comma();if(nexttoken.id===","){warning("Extra comma.",token)}else if(nexttoken.id==="}"&&!option.es5){warning("Extra comma.",token)}}else{break}}if(b){indent-=option.indent;indentation()}advance("}",this);if(option.es5){for(var name in props){if(is_own(props,name)&&props[name].setter&&!props[name].getter){warning("Setter is defined without getter.",props[name].setterToken)}}}return this};x.fud=function(){error("Expected to see a statement and instead saw a block.",token)}})(delim("{"));useESNextSyntax=function(){var conststatement=stmt("const",function(prefix){var id,name,value;this.first=[];for(;;){nonadjacent(token,nexttoken);id=identifier();if(funct[id]==="const"){warning("const '"+id+"' has already been declared")}if(funct["(global)"]&&predefined[id]===false){warning("Redefinition of '{a}'.",token,id)}addlabel(id,"const");if(prefix){break}name=token;this.first.push(token);if(nexttoken.id!=="="){warning("const "+"'{a}' is initialized to 'undefined'.",token,id)}if(nexttoken.id==="="){nonadjacent(token,nexttoken);advance("=");nonadjacent(token,nexttoken);if(nexttoken.id==="undefined"){warning("It is not necessary to initialize "+"'{a}' to 'undefined'.",token,id)}if(peek(0).id==="="&&nexttoken.identifier){error("Constant {a} was not declared correctly.",nexttoken,nexttoken.value)}value=expression(0);name.first=value}if(nexttoken.id!==","){break}comma()}return this});conststatement.exps=true};var varstatement=stmt("var",function(prefix){var id,name,value;if(funct["(onevar)"]&&option.onevar){warning("Too many var statements.")}else if(!funct["(global)"]){funct["(onevar)"]=true}this.first=[];for(;;){nonadjacent(token,nexttoken);id=identifier();if(option.esnext&&funct[id]==="const"){warning("const '"+id+"' has already been declared")}if(funct["(global)"]&&predefined[id]===false){warning("Redefinition of '{a}'.",token,id)}addlabel(id,"unused",token);if(prefix){break}name=token;this.first.push(token);if(nexttoken.id==="="){nonadjacent(token,nexttoken);advance("=");nonadjacent(token,nexttoken);if(nexttoken.id==="undefined"){warning("It is not necessary to initialize '{a}' to 'undefined'.",token,id)}if(peek(0).id==="="&&nexttoken.identifier){error("Variable {a} was not declared correctly.",nexttoken,nexttoken.value)}value=expression(0);name.first=value}if(nexttoken.id!==","){break}comma()}return this});varstatement.exps=true;blockstmt("function",function(){if(inblock){warning("Function declarations should not be placed in blocks. "+"Use a function expression or move the statement to the top of "+"the outer function.",token)}var i=identifier();if(option.esnext&&funct[i]==="const"){warning("const '"+i+"' has already been declared")}adjacent(token,nexttoken);addlabel(i,"unction",token);doFunction(i,{statement:true});if(nexttoken.id==="("&&nexttoken.line===token.line){error("Function declarations are not invocable. Wrap the whole function invocation in parens.")}return this});prefix("function",function(){var i=optionalidentifier();if(i){adjacent(token,nexttoken)}else{nonadjacent(token,nexttoken)}doFunction(i);if(!option.loopfunc&&funct["(loopage)"]){warning("Don't make functions within a loop.")}return this});blockstmt("if",function(){var t=nexttoken;increaseComplexityCount();advance("(");nonadjacent(this,t);nospace();expression(20);if(nexttoken.id==="="){if(!option.boss)warning("Expected a conditional expression and instead saw an assignment.");advance("=");expression(20)}advance(")",t);nospace(prevtoken,token);block(true,true);if(nexttoken.id==="else"){nonadjacent(token,nexttoken);advance("else");if(nexttoken.id==="if"||nexttoken.id==="switch"){statement(true)}else{block(true,true)}}return this});blockstmt("try",function(){var b;function doCatch(){var oldScope=scope;var e;advance("catch");nonadjacent(token,nexttoken);advance("(");scope=Object.create(oldScope);e=nexttoken.value;if(nexttoken.type!=="(identifier)"){e=null;warning("Expected an identifier and instead saw '{a}'.",nexttoken,e)}advance();advance(")");funct={"(name)":"(catch)","(line)":nexttoken.line,"(character)":nexttoken.character,"(context)":funct,"(breakage)":funct["(breakage)"],"(loopage)":funct["(loopage)"],"(scope)":scope,"(statement)":false,"(metrics)":createMetrics(nexttoken),"(catch)":true,"(tokens)":{}};if(e){addlabel(e,"exception")}token.funct=funct;functions.push(funct);block(false);scope=oldScope;funct["(last)"]=token.line;funct["(lastcharacter)"]=token.character;funct=funct["(context)"]}block(false);if(nexttoken.id==="catch"){increaseComplexityCount();doCatch();b=true}if(nexttoken.id==="finally"){advance("finally");block(false);return}else if(!b){error("Expected '{a}' and instead saw '{b}'.",nexttoken,"catch",nexttoken.value)}return this});blockstmt("while",function(){var t=nexttoken;funct["(breakage)"]+=1;funct["(loopage)"]+=1;increaseComplexityCount();advance("(");nonadjacent(this,t);nospace();expression(20);if(nexttoken.id==="="){if(!option.boss)warning("Expected a conditional expression and instead saw an assignment.");advance("=");expression(20)}advance(")",t);nospace(prevtoken,token);block(true,true);funct["(breakage)"]-=1;funct["(loopage)"]-=1;return this}).labelled=true;blockstmt("with",function(){var t=nexttoken;if(directive["use strict"]){error("'with' is not allowed in strict mode.",token)}else if(!option.withstmt){warning("Don't use 'with'.",token)}advance("(");nonadjacent(this,t);nospace();expression(0);advance(")",t);nospace(prevtoken,token);block(true,true);return this});blockstmt("switch",function(){var t=nexttoken,g=false;funct["(breakage)"]+=1;advance("(");nonadjacent(this,t);nospace();this.condition=expression(20);advance(")",t);nospace(prevtoken,token);nonadjacent(token,nexttoken);t=nexttoken;advance("{");nonadjacent(token,nexttoken);indent+=option.indent;this.cases=[];for(;;){switch(nexttoken.id){case"case":switch(funct["(verb)"]){case"break":case"case":case"continue":case"return":case"switch":case"throw":break;default:if(!ft.test(lines[nexttoken.line-2])){warning("Expected a 'break' statement before 'case'.",token)}}indentation(-option.indent);advance("case");this.cases.push(expression(20));increaseComplexityCount();g=true;advance(":");funct["(verb)"]="case";break;case"default":switch(funct["(verb)"]){case"break":case"continue":case"return":case"throw":break;default:if(!ft.test(lines[nexttoken.line-2])){warning("Expected a 'break' statement before 'default'.",token)}}indentation(-option.indent);advance("default");g=true;advance(":");break;case"}":indent-=option.indent;indentation();advance("}",t);if(this.cases.length===1||this.condition.id==="true"||this.condition.id==="false"){if(!option.onecase)warning("This 'switch' should be an 'if'.",this)}funct["(breakage)"]-=1;funct["(verb)"]=undefined;return;case"(end)":error("Missing '{a}'.",nexttoken,"}");return;default:if(g){switch(token.id){case",":error("Each value should have its own case label.");return;case":":g=false;statements();break;default:error("Missing ':' on a case clause.",token);return}}else{if(token.id===":"){advance(":");error("Unexpected '{a}'.",token,":");statements()}else{error("Expected '{a}' and instead saw '{b}'.",nexttoken,"case",nexttoken.value);return}}}}}).labelled=true;stmt("debugger",function(){if(!option.debug){warning("All 'debugger' statements should be removed.")}return this}).exps=true;(function(){var x=stmt("do",function(){funct["(breakage)"]+=1;funct["(loopage)"]+=1;increaseComplexityCount();this.first=block(true);advance("while");var t=nexttoken;nonadjacent(token,t);advance("(");nospace();expression(20);if(nexttoken.id==="="){if(!option.boss)warning("Expected a conditional expression and instead saw an assignment.");advance("=");expression(20)}advance(")",t);nospace(prevtoken,token);funct["(breakage)"]-=1;funct["(loopage)"]-=1;return this});x.labelled=true;x.exps=true})();blockstmt("for",function(){var s,t=nexttoken;funct["(breakage)"]+=1;funct["(loopage)"]+=1;increaseComplexityCount();advance("(");nonadjacent(this,t);nospace();if(peek(nexttoken.id==="var"?1:0).id==="in"){if(nexttoken.id==="var"){advance("var");varstatement.fud.call(varstatement,true)}else{switch(funct[nexttoken.value]){case"unused":funct[nexttoken.value]="var";break;case"var":break;default:warning("Bad for in variable '{a}'.",nexttoken,nexttoken.value)}advance()}advance("in");expression(20);advance(")",t);s=block(true,true);if(option.forin&&s&&(s.length>1||typeof s[0]!=="object"||s[0].value!=="if")){warning("The body of a for in should be wrapped in an if statement to filter "+"unwanted properties from the prototype.",this)}funct["(breakage)"]-=1;funct["(loopage)"]-=1;return this}else{if(nexttoken.id!==";"){if(nexttoken.id==="var"){advance("var");varstatement.fud.call(varstatement)}else{for(;;){expression(0,"for");if(nexttoken.id!==","){break}comma()}}}nolinebreak(token);advance(";");if(nexttoken.id!==";"){expression(20);if(nexttoken.id==="="){if(!option.boss)warning("Expected a conditional expression and instead saw an assignment.");advance("=");expression(20)}}nolinebreak(token);advance(";");if(nexttoken.id===";"){error("Expected '{a}' and instead saw '{b}'.",nexttoken,")",";")}if(nexttoken.id!==")"){for(;;){expression(0,"for");if(nexttoken.id!==","){break}comma()}}advance(")",t);nospace(prevtoken,token);block(true,true);funct["(breakage)"]-=1;funct["(loopage)"]-=1;return this}}).labelled=true;stmt("break",function(){var v=nexttoken.value;if(funct["(breakage)"]===0)warning("Unexpected '{a}'.",nexttoken,this.value);if(!option.asi)nolinebreak(this);if(nexttoken.id!==";"){if(token.line===nexttoken.line){if(funct[v]!=="label"){warning("'{a}' is not a statement label.",nexttoken,v)}else if(scope[v]!==funct){warning("'{a}' is out of scope.",nexttoken,v)}this.first=nexttoken;advance()}}reachable("break");return this}).exps=true;stmt("continue",function(){var v=nexttoken.value;if(funct["(breakage)"]===0)warning("Unexpected '{a}'.",nexttoken,this.value);if(!option.asi)nolinebreak(this);if(nexttoken.id!==";"){if(token.line===nexttoken.line){if(funct[v]!=="label"){warning("'{a}' is not a statement label.",nexttoken,v)}else if(scope[v]!==funct){warning("'{a}' is out of scope.",nexttoken,v)}this.first=nexttoken;advance()}}else if(!funct["(loopage)"]){warning("Unexpected '{a}'.",nexttoken,this.value)}reachable("continue");return this}).exps=true;stmt("return",function(){if(this.line===nexttoken.line){if(nexttoken.id==="(regexp)")warning("Wrap the /regexp/ literal in parens to disambiguate the slash operator.");if(nexttoken.id!==";"&&!nexttoken.reach){nonadjacent(token,nexttoken);if(peek().value==="="&&!option.boss){warningAt("Did you mean to return a conditional instead of an assignment?",token.line,token.character+1)}this.first=expression(0)}}else if(!option.asi){nolinebreak(this)}reachable("return");return this}).exps=true;stmt("throw",function(){nolinebreak(this);nonadjacent(token,nexttoken);this.first=expression(20);reachable("throw");return this}).exps=true;reserve("class");reserve("const");reserve("enum");reserve("export");reserve("extends");reserve("import");reserve("super");reserve("let");reserve("yield");reserve("implements");reserve("interface");reserve("package");reserve("private");reserve("protected");reserve("public");reserve("static");function jsonValue(){function jsonObject(){var o={},t=nexttoken;advance("{");if(nexttoken.id!=="}"){for(;;){if(nexttoken.id==="(end)"){error("Missing '}' to match '{' from line {a}.",nexttoken,t.line)}else if(nexttoken.id==="}"){warning("Unexpected comma.",token);break}else if(nexttoken.id===","){error("Unexpected comma.",nexttoken)}else if(nexttoken.id!=="(string)"){warning("Expected a string and instead saw {a}.",nexttoken,nexttoken.value)}if(o[nexttoken.value]===true){warning("Duplicate key '{a}'.",nexttoken,nexttoken.value)}else if(nexttoken.value==="__proto__"&&!option.proto||nexttoken.value==="__iterator__"&&!option.iterator){warning("The '{a}' key may produce unexpected results.",nexttoken,nexttoken.value)}else{o[nexttoken.value]=true}advance();advance(":");jsonValue();if(nexttoken.id!==","){break}advance(",")}}advance("}")}function jsonArray(){var t=nexttoken;advance("[");if(nexttoken.id!=="]"){for(;;){if(nexttoken.id==="(end)"){error("Missing ']' to match '[' from line {a}.",nexttoken,t.line)
}else if(nexttoken.id==="]"){warning("Unexpected comma.",token);break}else if(nexttoken.id===","){error("Unexpected comma.",nexttoken)}jsonValue();if(nexttoken.id!==","){break}advance(",")}}advance("]")}switch(nexttoken.id){case"{":jsonObject();break;case"[":jsonArray();break;case"true":case"false":case"null":case"(number)":case"(string)":advance();break;case"-":advance("-");if(token.character!==nexttoken.from){warning("Unexpected space after '-'.",token)}adjacent(token,nexttoken);advance("(number)");break;default:error("Expected a JSON value.",nexttoken)}}var itself=function(s,o,g){var a,i,k,x;var optionKeys;var newOptionObj={};if(o&&o.scope){JSHINT.scope=o.scope}else{JSHINT.errors=[];JSHINT.undefs=[];JSHINT.internals=[];JSHINT.blacklist={};JSHINT.scope="(main)"}predefined=Object.create(standard);declared=Object.create(null);combine(predefined,g||{});if(o){a=o.predef;if(a){if(!Array.isArray(a)&&typeof a==="object"){a=Object.keys(a)}a.forEach(function(item){var slice;if(item[0]==="-"){slice=item.slice(1);JSHINT.blacklist[slice]=slice}else{predefined[item]=true}})}optionKeys=Object.keys(o);for(x=0;x<optionKeys.length;x++){newOptionObj[optionKeys[x]]=o[optionKeys[x]];if(optionKeys[x]==="newcap"&&o[optionKeys[x]]===false)newOptionObj["(explicitNewcap)"]=true;if(optionKeys[x]==="indent")newOptionObj.white=true}}option=newOptionObj;option.indent=option.indent||4;option.maxerr=option.maxerr||50;tab="";for(i=0;i<option.indent;i+=1){tab+=" "}indent=1;global=Object.create(predefined);scope=global;funct={"(global)":true,"(name)":"(global)","(scope)":scope,"(breakage)":0,"(loopage)":0,"(tokens)":{},"(metrics)":createMetrics(nexttoken)};functions=[funct];urls=[];stack=null;member={};membersOnly=null;implied={};inblock=false;lookahead=[];jsonmode=false;warnings=0;lines=[];unuseds=[];if(!isString(s)&&!Array.isArray(s)){errorAt("Input is neither a string nor an array of strings.",0);return false}if(isString(s)&&/^\s*$/g.test(s)){errorAt("Input is an empty string.",0);return false}if(s.length===0){errorAt("Input is an empty array.",0);return false}lex.init(s);prereg=true;directive={};prevtoken=token=nexttoken=syntax["(begin)"];for(var name in o){if(is_own(o,name)){checkOption(name,token)}}assume();combine(predefined,g||{});comma.first=true;quotmark=undefined;try{advance();switch(nexttoken.id){case"{":case"[":option.laxbreak=true;jsonmode=true;jsonValue();break;default:directives();if(directive["use strict"]&&!option.globalstrict){warning('Use the function form of "use strict".',prevtoken)}statements()}advance(nexttoken&&nexttoken.value!=="."?"(end)":undefined);var markDefined=function(name,context){do{if(typeof context[name]==="string"){if(context[name]==="unused")context[name]="var";else if(context[name]==="unction")context[name]="closure";return true}context=context["(context)"]}while(context);return false};var clearImplied=function(name,line){if(!implied[name])return;var newImplied=[];for(var i=0;i<implied[name].length;i+=1){if(implied[name][i]!==line)newImplied.push(implied[name][i])}if(newImplied.length===0)delete implied[name];else implied[name]=newImplied};var warnUnused=function(name,token){var line=token.line;var chr=token.character;if(option.unused)warningAt("'{a}' is defined but never used.",line,chr,name);unuseds.push({name:name,line:line,character:chr})};var checkUnused=function(func,key){var type=func[key];var token=func["(tokens)"][key];if(key.charAt(0)==="(")return;if(type!=="unused"&&type!=="unction")return;if(func["(params)"]&&func["(params)"].indexOf(key)!==-1)return;warnUnused(key,token)};for(i=0;i<JSHINT.undefs.length;i+=1){k=JSHINT.undefs[i].slice(0);if(markDefined(k[2].value,k[0])){clearImplied(k[2].value,k[2].line)}else{warning.apply(warning,k.slice(1))}}functions.forEach(function(func){for(var key in func){if(is_own(func,key)){checkUnused(func,key)}}if(!func["(params)"])return;var params=func["(params)"].slice();var param=params.pop();var type;while(param){type=func[param];if(param==="undefined")return;if(type!=="unused"&&type!=="unction")return;warnUnused(param,func["(tokens)"][param]);param=params.pop()}});for(var key in declared){if(is_own(declared,key)&&!is_own(global,key)){warnUnused(key,declared[key])}}}catch(e){if(e){var nt=nexttoken||{};JSHINT.errors.push({raw:e.raw,reason:e.message,line:e.line||nt.line,character:e.character||nt.from},null)}}if(JSHINT.scope==="(main)"){o=o||{};for(i=0;i<JSHINT.internals.length;i+=1){k=JSHINT.internals[i];o.scope=k.elem;itself(k.value,o,g)}}return JSHINT.errors.length===0};itself.data=function(){var data={functions:[],options:option};var implieds=[];var members=[];var fu,f,i,j,n,globals;if(itself.errors.length){data.errors=itself.errors}if(jsonmode){data.json=true}for(n in implied){if(is_own(implied,n)){implieds.push({name:n,line:implied[n]})}}if(implieds.length>0){data.implieds=implieds}if(urls.length>0){data.urls=urls}globals=Object.keys(scope);if(globals.length>0){data.globals=globals}for(i=1;i<functions.length;i+=1){f=functions[i];fu={};for(j=0;j<functionicity.length;j+=1){fu[functionicity[j]]=[]}for(j=0;j<functionicity.length;j+=1){if(fu[functionicity[j]].length===0){delete fu[functionicity[j]]}}fu.name=f["(name)"];fu.param=f["(params)"];fu.line=f["(line)"];fu.character=f["(character)"];fu.last=f["(last)"];fu.lastcharacter=f["(lastcharacter)"];data.functions.push(fu)}if(unuseds.length>0){data.unused=unuseds}members=[];for(n in member){if(typeof member[n]==="number"){data.member=member;break}}return data};itself.jshint=itself;return itself}();if(typeof exports==="object"&&exports){exports.JSHINT=JSHINT}CodeMirror.defineMode("javascript",function(config,parserConfig){var indentUnit=config.indentUnit;var jsonMode=parserConfig.json;var isTS=parserConfig.typescript;var keywords=function(){function kw(type){return{type:type,style:"keyword"}}var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c");var operator=kw("operator"),atom={type:"atom",style:"atom"};var jsKeywords={"if":A,"while":A,"with":A,"else":B,"do":B,"try":B,"finally":B,"return":C,"break":C,"continue":C,"new":C,"delete":C,"throw":C,"var":kw("var"),"const":kw("var"),let:kw("var"),"function":kw("function"),"catch":kw("catch"),"for":kw("for"),"switch":kw("switch"),"case":kw("case"),"default":kw("default"),"in":operator,"typeof":operator,"instanceof":operator,"true":atom,"false":atom,"null":atom,undefined:atom,NaN:atom,Infinity:atom,"this":kw("this")};if(isTS){var type={type:"variable",style:"variable-3"};var tsKeywords={"interface":kw("interface"),"class":kw("class"),"extends":kw("extends"),constructor:kw("constructor"),"public":kw("public"),"private":kw("private"),"protected":kw("protected"),"static":kw("static"),"super":kw("super"),string:type,number:type,bool:type,any:type};for(var attr in tsKeywords){jsKeywords[attr]=tsKeywords[attr]}}return jsKeywords}();var isOperatorChar=/[+\-*&%=<>!?|~^]/;function chain(stream,state,f){state.tokenize=f;return f(stream,state)}function nextUntilUnescaped(stream,end){var escaped=false,next;while((next=stream.next())!=null){if(next==end&&!escaped)return false;escaped=!escaped&&next=="\\"}return escaped}var type,content;function ret(tp,style,cont){type=tp;content=cont;return style}function jsTokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'")return chain(stream,state,jsTokenString(ch));else if(/[\[\]{}\(\),;\:\.]/.test(ch))return ret(ch);else if(ch=="0"&&stream.eat(/x/i)){stream.eatWhile(/[\da-f]/i);return ret("number","number")}else if(/\d/.test(ch)||ch=="-"&&stream.eat(/\d/)){stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return ret("number","number")}else if(ch=="/"){if(stream.eat("*")){return chain(stream,state,jsTokenComment)}else if(stream.eat("/")){stream.skipToEnd();return ret("comment","comment")}else if(state.lastType=="operator"||state.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(state.lastType)){nextUntilUnescaped(stream,"/");stream.eatWhile(/[gimy]/);return ret("regexp","string-2")}else{stream.eatWhile(isOperatorChar);return ret("operator",null,stream.current())}}else if(ch=="#"){stream.skipToEnd();return ret("error","error")}else if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return ret("operator",null,stream.current())}else{stream.eatWhile(/[\w\$_]/);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return known&&state.lastType!="."?ret(known.type,known.style,word):ret("variable","variable",word)}}function jsTokenString(quote){return function(stream,state){if(!nextUntilUnescaped(stream,quote))state.tokenize=jsTokenBase;return ret("string","string")}}function jsTokenComment(stream,state){var maybeEnd=false,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=jsTokenBase;break}maybeEnd=ch=="*"}return ret("comment","comment")}var atomicTypes={atom:true,number:true,variable:true,string:true,regexp:true,"this":true};function JSLexical(indented,column,type,align,prev,info){this.indented=indented;this.column=column;this.type=type;this.prev=prev;this.info=info;if(align!=null)this.align=align}function inScope(state,varname){for(var v=state.localVars;v;v=v.next)if(v.name==varname)return true}function parseJS(state,style,type,content,stream){var cc=state.cc;cx.state=state;cx.stream=stream;cx.marked=null,cx.cc=cc;if(!state.lexical.hasOwnProperty("align"))state.lexical.align=true;while(true){var combinator=cc.length?cc.pop():jsonMode?expression:statement;if(combinator(type,content)){while(cc.length&&cc[cc.length-1].lex)cc.pop()();if(cx.marked)return cx.marked;if(type=="variable"&&inScope(state,content))return"variable-2";return style}}}var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;i>=0;i--)cx.cc.push(arguments[i])}function cont(){pass.apply(null,arguments);return true}function register(varname){function inList(list){for(var v=list;v;v=v.next)if(v.name==varname)return true;return false}var state=cx.state;if(state.context){cx.marked="def";if(inList(state.localVars))return;state.localVars={name:varname,next:state.localVars}}else{if(inList(state.globalVars))return;state.globalVars={name:varname,next:state.globalVars}}}var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars};cx.state.localVars=defaultVars}function popcontext(){cx.state.localVars=cx.state.context.vars;cx.state.context=cx.state.context.prev}function pushlex(type,info){var result=function(){var state=cx.state;state.lexical=new JSLexical(state.indented,cx.stream.column(),type,null,state.lexical,info)};result.lex=true;return result}function poplex(){var state=cx.state;if(state.lexical.prev){if(state.lexical.type==")")state.indented=state.lexical.indented;state.lexical=state.lexical.prev}}poplex.lex=true;function expect(wanted){return function(type){if(type==wanted)return cont();else if(wanted==";")return pass();else return cont(arguments.callee)}}function statement(type){if(type=="var")return cont(pushlex("vardef"),vardef1,expect(";"),poplex);if(type=="keyword a")return cont(pushlex("form"),expression,statement,poplex);if(type=="keyword b")return cont(pushlex("form"),statement,poplex);if(type=="{")return cont(pushlex("}"),block,poplex);if(type==";")return cont();if(type=="function")return cont(functiondef);if(type=="for")return cont(pushlex("form"),expect("("),pushlex(")"),forspec1,expect(")"),poplex,statement,poplex);if(type=="variable")return cont(pushlex("stat"),maybelabel);if(type=="switch")return cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex);if(type=="case")return cont(expression,expect(":"));if(type=="default")return cont(expect(":"));if(type=="catch")return cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext);return pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(type){if(atomicTypes.hasOwnProperty(type))return cont(maybeoperator);if(type=="function")return cont(functiondef);if(type=="keyword c")return cont(maybeexpression);if(type=="(")return cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeoperator);if(type=="operator")return cont(expression);if(type=="[")return cont(pushlex("]"),commasep(expression,"]"),poplex,maybeoperator);if(type=="{")return cont(pushlex("}"),commasep(objprop,"}"),poplex,maybeoperator);return cont()}function maybeexpression(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expression)}function maybeoperator(type,value){if(type=="operator"){if(/\+\+|--/.test(value))return cont(maybeoperator);if(value=="?")return cont(expression,expect(":"),expression);return cont(expression)}if(type==";")return;if(type=="(")return cont(pushlex(")"),commasep(expression,")"),poplex,maybeoperator);if(type==".")return cont(property,maybeoperator);if(type=="[")return cont(pushlex("]"),expression,expect("]"),poplex,maybeoperator)}function maybelabel(type){if(type==":")return cont(poplex,statement);return pass(maybeoperator,expect(";"),poplex)}function property(type){if(type=="variable"){cx.marked="property";return cont()}}function objprop(type,value){if(type=="variable"){cx.marked="property";if(value=="get"||value=="set")return cont(getterSetter)}else if(type=="number"||type=="string"){cx.marked=type+" property"}if(atomicTypes.hasOwnProperty(type))return cont(expect(":"),expression)}function getterSetter(type){if(type==":")return cont(expression);if(type!="variable")return cont(expect(":"),expression);cx.marked="property";return cont(functiondef)}function commasep(what,end){function proceed(type){if(type==",")return cont(what,proceed);if(type==end)return cont();return cont(expect(end))}return function(type){if(type==end)return cont();else return pass(what,proceed)}}function block(type){if(type=="}")return cont();return pass(statement,block)}function maybetype(type){if(type==":")return cont(typedef);return pass()}function typedef(type){if(type=="variable"){cx.marked="variable-3";return cont()}return pass()}function vardef1(type,value){if(type=="variable"){register(value);return isTS?cont(maybetype,vardef2):cont(vardef2)}return pass()}function vardef2(type,value){if(value=="=")return cont(expression,vardef2);if(type==",")return cont(vardef1)}function forspec1(type){if(type=="var")return cont(vardef1,expect(";"),forspec2);if(type==";")return cont(forspec2);if(type=="variable")return cont(formaybein);return cont(forspec2)}function formaybein(_type,value){if(value=="in")return cont(expression);return cont(maybeoperator,forspec2)}function forspec2(type,value){if(type==";")return cont(forspec3);if(value=="in")return cont(expression);return cont(expression,expect(";"),forspec3)}function forspec3(type){if(type!=")")cont(expression)}function functiondef(type,value){if(type=="variable"){register(value);return cont(functiondef)}if(type=="(")return cont(pushlex(")"),pushcontext,commasep(funarg,")"),poplex,statement,popcontext)}function funarg(type,value){if(type=="variable"){register(value);return isTS?cont(maybetype):cont()}}return{startState:function(basecolumn){return{tokenize:jsTokenBase,lastType:null,cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",false),localVars:parserConfig.localVars,globalVars:parserConfig.globalVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:0}},token:function(stream,state){if(stream.sol()){if(!state.lexical.hasOwnProperty("align"))state.lexical.align=false;state.indented=stream.indentation()}if(stream.eatSpace())return null;var style=state.tokenize(stream,state);if(type=="comment")return style;state.lastType=type;return parseJS(state,style,type,content,stream)},indent:function(state,textAfter){if(state.tokenize==jsTokenComment)return CodeMirror.Pass;if(state.tokenize!=jsTokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical;if(lexical.type=="stat"&&firstChar=="}")lexical=lexical.prev;var type=lexical.type,closing=firstChar==type;if(type=="vardef")return lexical.indented+(state.lastType=="operator"||state.lastType==","?4:0);else if(type=="form"&&firstChar=="{")return lexical.indented;else if(type=="form")return lexical.indented+indentUnit;else if(type=="stat")return lexical.indented+(state.lastType=="operator"||state.lastType==","?indentUnit:0);else if(lexical.info=="switch"&&!closing)return lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit);else if(lexical.align)return lexical.column+(closing?0:1);else return lexical.indented+(closing?0:indentUnit)},electricChars:":{}",jsonMode:jsonMode}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:true});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:true});CodeMirror.defineMode("coffeescript",function(conf){var ERRORCLASS="error";function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b")}var singleOperators=new RegExp("^[\\+\\-\\*/%&|\\^~<>!?]");var singleDelimiters=new RegExp("^[\\(\\)\\[\\]\\{\\},:`=;\\.]");var doubleOperators=new RegExp("^((->)|(=>)|(\\+\\+)|(\\+\\=)|(\\-\\-)|(\\-\\=)|(\\*\\*)|(\\*\\=)|(\\/\\/)|(\\/\\=)|(==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//))");var doubleDelimiters=new RegExp("^((\\.\\.)|(\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))");var tripleDelimiters=new RegExp("^((\\.\\.\\.)|(//=)|(>>=)|(<<=)|(\\*\\*=))");var identifiers=new RegExp("^[_A-Za-z$][_A-Za-z$0-9]*");var properties=new RegExp("^(@|this.)[_A-Za-z$][_A-Za-z$0-9]*");var wordOperators=wordRegexp(["and","or","not","is","isnt","in","instanceof","typeof"]);var indentKeywords=["for","while","loop","if","unless","else","switch","try","catch","finally","class"];var commonKeywords=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","throw","when","until"];var keywords=wordRegexp(indentKeywords.concat(commonKeywords));indentKeywords=wordRegexp(indentKeywords);var stringPrefixes=new RegExp("^('{3}|\"{3}|['\"])");var regexPrefixes=new RegExp("^(/{3}|/)");var commonConstants=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"];var constants=wordRegexp(commonConstants);function tokenBase(stream,state){if(stream.sol()){var scopeOffset=state.scopes[0].offset;if(stream.eatSpace()){var lineOffset=stream.indentation();if(lineOffset>scopeOffset){return"indent"}else if(lineOffset<scopeOffset){return"dedent"}return null}else{if(scopeOffset>0){dedent(stream,state)}}}if(stream.eatSpace()){return null}var ch=stream.peek();if(stream.match("####")){stream.skipToEnd();return"comment"}if(stream.match("###")){state.tokenize=longComment;return state.tokenize(stream,state)}if(ch==="#"){stream.skipToEnd();return"comment"}if(stream.match(/^-?[0-9\.]/,false)){var floatLiteral=false;if(stream.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)){floatLiteral=true}if(stream.match(/^-?\d+\.\d*/)){floatLiteral=true}if(stream.match(/^-?\.\d+/)){floatLiteral=true}if(floatLiteral){if(stream.peek()=="."){stream.backUp(1)}return"number"}var intLiteral=false;if(stream.match(/^-?0x[0-9a-f]+/i)){intLiteral=true}if(stream.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)){intLiteral=true}if(stream.match(/^-?0(?![\dx])/i)){intLiteral=true}if(intLiteral){return"number"}}if(stream.match(stringPrefixes)){state.tokenize=tokenFactory(stream.current(),"string");return state.tokenize(stream,state)}if(stream.match(regexPrefixes)){if(stream.current()!="/"||stream.match(/^.*\//,false)){state.tokenize=tokenFactory(stream.current(),"string-2");return state.tokenize(stream,state)}else{stream.backUp(1)}}if(stream.match(tripleDelimiters)||stream.match(doubleDelimiters)){return"punctuation"}if(stream.match(doubleOperators)||stream.match(singleOperators)||stream.match(wordOperators)){return"operator"}if(stream.match(singleDelimiters)){return"punctuation"}if(stream.match(constants)){return"atom"}if(stream.match(keywords)){return"keyword"}if(stream.match(identifiers)){return"variable"}if(stream.match(properties)){return"property"}stream.next();return ERRORCLASS}function tokenFactory(delimiter,outclass){var singleline=delimiter.length==1;return function(stream,state){while(!stream.eol()){stream.eatWhile(/[^'"\/\\]/);if(stream.eat("\\")){stream.next();if(singleline&&stream.eol()){return outclass}}else if(stream.match(delimiter)){state.tokenize=tokenBase;return outclass}else{stream.eat(/['"\/]/)}}if(singleline){if(conf.mode.singleLineStringErrors){outclass=ERRORCLASS}else{state.tokenize=tokenBase}}return outclass}}function longComment(stream,state){while(!stream.eol()){stream.eatWhile(/[^#]/);if(stream.match("###")){state.tokenize=tokenBase;break}stream.eatWhile("#")}return"comment"}function indent(stream,state,type){type=type||"coffee";var indentUnit=0;if(type==="coffee"){for(var i=0;i<state.scopes.length;i++){if(state.scopes[i].type==="coffee"){indentUnit=state.scopes[i].offset+conf.indentUnit;break}}}else{indentUnit=stream.column()+stream.current().length}state.scopes.unshift({offset:indentUnit,type:type})}function dedent(stream,state){if(state.scopes.length==1)return;if(state.scopes[0].type==="coffee"){var _indent=stream.indentation();var _indent_index=-1;for(var i=0;i<state.scopes.length;++i){if(_indent===state.scopes[i].offset){_indent_index=i;break}}if(_indent_index===-1){return true}while(state.scopes[0].offset!==_indent){state.scopes.shift()}return false}else{state.scopes.shift();return false}}function tokenLexer(stream,state){var style=state.tokenize(stream,state);var current=stream.current();if(current==="."){style=state.tokenize(stream,state);current=stream.current();if(style==="variable"){return"variable"}else{return ERRORCLASS}}if(current==="return"){state.dedent+=1}if((current==="->"||current==="=>")&&!state.lambda&&state.scopes[0].type=="coffee"&&stream.peek()===""||style==="indent"){indent(stream,state)}var delimiter_index="[({".indexOf(current);if(delimiter_index!==-1){indent(stream,state,"])}".slice(delimiter_index,delimiter_index+1))}if(indentKeywords.exec(current)){indent(stream,state)}if(current=="then"){dedent(stream,state)}if(style==="dedent"){if(dedent(stream,state)){return ERRORCLASS}}delimiter_index="])}".indexOf(current);if(delimiter_index!==-1){if(dedent(stream,state)){return ERRORCLASS}}if(state.dedent>0&&stream.eol()&&state.scopes[0].type=="coffee"){if(state.scopes.length>1)state.scopes.shift();state.dedent-=1}return style}var external={startState:function(basecolumn){return{tokenize:tokenBase,scopes:[{offset:basecolumn||0,type:"coffee"}],lastToken:null,lambda:false,dedent:0}},token:function(stream,state){var style=tokenLexer(stream,state);state.lastToken={style:style,content:stream.current()};if(stream.eol()&&stream.lambda){state.lambda=false}return style},indent:function(state){if(state.tokenize!=tokenBase){return 0}return state.scopes[0].offset}};return external});CodeMirror.defineMIME("text/x-coffeescript","coffeescript");CodeMirror.defineMode("css",function(config){return CodeMirror.getMode(config,"text/css")});CodeMirror.defineMode("css-base",function(config,parserConfig){"use strict";var indentUnit=config.indentUnit,hooks=parserConfig.hooks||{},atMediaTypes=parserConfig.atMediaTypes||{},atMediaFeatures=parserConfig.atMediaFeatures||{},propertyKeywords=parserConfig.propertyKeywords||{},colorKeywords=parserConfig.colorKeywords||{},valueKeywords=parserConfig.valueKeywords||{},allowNested=!!parserConfig.allowNested,type=null;function ret(style,tp){type=tp;return style}function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(result!==false)return result}if(ch=="@"){stream.eatWhile(/[\w\\\-]/);return ret("def",stream.current())}else if(ch=="=")ret(null,"compare");else if((ch=="~"||ch=="|")&&stream.eat("="))return ret(null,"compare");else if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(ch=="#"){stream.eatWhile(/[\w\\\-]/);return ret("atom","hash")}else if(ch=="!"){stream.match(/^\s*\w*/);return ret("keyword","important")}else if(/\d/.test(ch)){stream.eatWhile(/[\w.%]/);return ret("number","unit")}else if(ch==="-"){if(/\d/.test(stream.peek())){stream.eatWhile(/[\w.%]/);return ret("number","unit")}else if(stream.match(/^[^-]+-/)){return ret("meta","meta")}}else if(/[,+>*\/]/.test(ch)){return ret(null,"select-op")}else if(ch=="."&&stream.match(/^-?[_a-z][_a-z0-9-]*/i)){return ret("qualifier","qualifier")}else if(ch==":"){return ret("operator",ch)}else if(/[;{}\[\]\(\)]/.test(ch)){return ret(null,ch)}else if(ch=="u"&&stream.match("rl(")){stream.backUp(1);state.tokenize=tokenParenthesized;return ret("property","variable")}else{stream.eatWhile(/[\w\\\-]/);return ret("property","variable")}}function tokenString(quote,nonInclusive){return function(stream,state){var escaped=false,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped)break;escaped=!escaped&&ch=="\\"}if(!escaped){if(nonInclusive)stream.backUp(1);state.tokenize=tokenBase}return ret("string","string")}}function tokenParenthesized(stream,state){stream.next();if(!stream.match(/\s*[\"\']/,false))state.tokenize=tokenString(")",true);else state.tokenize=tokenBase;return ret(null,"(")}return{startState:function(base){return{tokenize:tokenBase,baseIndent:base||0,stack:[]}},token:function(stream,state){state.tokenize=state.tokenize||tokenBase;if(state.tokenize==tokenBase&&stream.eatSpace())return null;var style=state.tokenize(stream,state);if(style&&typeof style!="string")style=ret(style[0],style[1]);var context=state.stack[state.stack.length-1];if(style=="variable"){if(type=="variable-definition")state.stack.push("propertyValue");return"variable-2"}else if(style=="property"){if(context=="propertyValue"){if(valueKeywords[stream.current()]){style="string-2"}else if(colorKeywords[stream.current()]){style="keyword"}else{style="variable-2"}}else if(context=="rule"){if(!propertyKeywords[stream.current()]){style+=" error"}}else if(context=="block"){if(propertyKeywords[stream.current()]){style="property"}else if(colorKeywords[stream.current()]){style="keyword"}else if(valueKeywords[stream.current()]){style="string-2"}else{style="tag"}}else if(!context||context=="@media{"){style="tag"}else if(context=="@media"){if(atMediaTypes[stream.current()]){style="attribute"}else if(/^(only|not)$/i.test(stream.current())){style="keyword"}else if(stream.current().toLowerCase()=="and"){style="error"}else if(atMediaFeatures[stream.current()]){style="error"}else{style="attribute error"}}else if(context=="@mediaType"){if(atMediaTypes[stream.current()]){style="attribute"}else if(stream.current().toLowerCase()=="and"){style="operator"}else if(/^(only|not)$/i.test(stream.current())){style="error"}else if(atMediaFeatures[stream.current()]){style="error"}else{style="error"}}else if(context=="@mediaType("){if(propertyKeywords[stream.current()]){}else if(atMediaTypes[stream.current()]){style="error"}else if(stream.current().toLowerCase()=="and"){style="operator"}else if(/^(only|not)$/i.test(stream.current())){style="error"}else{style+=" error"}}else{style="error"}}else if(style=="atom"){if(!context||context=="@media{"||context=="block"){style="builtin"}else if(context=="propertyValue"){if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(stream.current())){style+=" error"}}else{style="error"}}else if(context=="@media"&&type=="{"){style="error"}if(type=="{"){if(context=="@media"||context=="@mediaType"){state.stack.pop();state.stack[state.stack.length-1]="@media{"}else{var newContext=allowNested?"block":"rule";state.stack.push(newContext)}}else if(type=="}"){var lastState=state.stack[state.stack.length-1];if(lastState=="interpolation")style="operator";state.stack.pop();if(context=="propertyValue")state.stack.pop()}else if(type=="interpolation")state.stack.push("interpolation");else if(type=="@media")state.stack.push("@media");else if(context=="@media"&&/\b(keyword|attribute)\b/.test(style))state.stack.push("@mediaType");else if(context=="@mediaType"&&stream.current()==",")state.stack.pop();else if(context=="@mediaType"&&type=="(")state.stack.push("@mediaType(");else if(context=="@mediaType("&&type==")")state.stack.pop();else if((context=="rule"||context=="block")&&type==":")state.stack.push("propertyValue");else if(context=="propertyValue"&&type==";")state.stack.pop();return style},indent:function(state,textAfter){var n=state.stack.length;if(/^\}/.test(textAfter))n-=state.stack[state.stack.length-1]=="propertyValue"?2:1;return state.baseIndent+n*indentUnit},electricChars:"}"}});(function(){function keySet(array){var keys={};for(var i=0;i<array.length;++i){keys[array[i]]=true}return keys}var atMediaTypes=keySet(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]);var atMediaFeatures=keySet(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]);var propertyKeywords=keySet(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]);
var colorKeywords=keySet(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]);var valueKeywords=keySet(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"]);function tokenCComment(stream,state){var maybeEnd=false,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=="/"){state.tokenize=null;break}maybeEnd=ch=="*"}return["comment","comment"]}CodeMirror.defineMIME("text/css",{atMediaTypes:atMediaTypes,atMediaFeatures:atMediaFeatures,propertyKeywords:propertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,hooks:{"<":function(stream,state){function tokenSGMLComment(stream,state){var dashes=0,ch;while((ch=stream.next())!=null){if(dashes>=2&&ch==">"){state.tokenize=null;break}dashes=ch=="-"?dashes+1:0}return["comment","comment"]}if(stream.eat("!")){state.tokenize=tokenSGMLComment;return tokenSGMLComment(stream,state)}},"/":function(stream,state){if(stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}return false}},name:"css-base"});CodeMirror.defineMIME("text/x-scss",{atMediaTypes:atMediaTypes,atMediaFeatures:atMediaFeatures,propertyKeywords:propertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,allowNested:true,hooks:{$:function(stream){stream.match(/^[\w-]+/);if(stream.peek()==":"){return["variable","variable-definition"]}return["variable","variable"]},"/":function(stream,state){if(stream.eat("/")){stream.skipToEnd();return["comment","comment"]}else if(stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}else{return["operator","operator"]}},"#":function(stream){if(stream.eat("{")){return["operator","interpolation"]}else{stream.eatWhile(/[\w\\\-]/);return["atom","hash"]}}},name:"css-base"})})();CodeMirror.defineMode("xml",function(config,parserConfig){var indentUnit=config.indentUnit;var multilineTagIndentFactor=parserConfig.multilineTagIndentFactor||1;var Kludges=parserConfig.htmlMode?{autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false};var alignCDATA=parserConfig.alignCDATA;var tagName,type;function inText(stream,state){function chain(parser){state.tokenize=parser;return parser(stream,state)}var ch=stream.next();if(ch=="<"){if(stream.eat("!")){if(stream.eat("[")){if(stream.match("CDATA["))return chain(inBlock("atom","]]>"));else return null}else if(stream.match("--"))return chain(inBlock("comment","-->"));else if(stream.match("DOCTYPE",true,true)){stream.eatWhile(/[\w\._\-]/);return chain(doctype(1))}else return null}else if(stream.eat("?")){stream.eatWhile(/[\w\._\-]/);state.tokenize=inBlock("meta","?>");return"meta"}else{var isClose=stream.eat("/");tagName="";var c;while(c=stream.eat(/[^\s\u00a0=<>\"\'\/?]/))tagName+=c;if(!tagName)return"error";type=isClose?"closeTag":"openTag";state.tokenize=inTag;return"tag"}}else if(ch=="&"){var ok;if(stream.eat("#")){if(stream.eat("x")){ok=stream.eatWhile(/[a-fA-F\d]/)&&stream.eat(";")}else{ok=stream.eatWhile(/[\d]/)&&stream.eat(";")}}else{ok=stream.eatWhile(/[\w\.\-:]/)&&stream.eat(";")}return ok?"atom":"error"}else{stream.eatWhile(/[^&<]/);return null}}function inTag(stream,state){var ch=stream.next();if(ch==">"||ch=="/"&&stream.eat(">")){state.tokenize=inText;type=ch==">"?"endTag":"selfcloseTag";return"tag"}else if(ch=="="){type="equals";return null}else if(/[\'\"]/.test(ch)){state.tokenize=inAttribute(ch);return state.tokenize(stream,state)}else{stream.eatWhile(/[^\s\u00a0=<>\"\']/);return"word"}}function inAttribute(quote){return function(stream,state){while(!stream.eol()){if(stream.next()==quote){state.tokenize=inTag;break}}return"string"}}function inBlock(style,terminator){return function(stream,state){while(!stream.eol()){if(stream.match(terminator)){state.tokenize=inText;break}stream.next()}return style}}function doctype(depth){return function(stream,state){var ch;while((ch=stream.next())!=null){if(ch=="<"){state.tokenize=doctype(depth+1);return state.tokenize(stream,state)}else if(ch==">"){if(depth==1){state.tokenize=inText;break}else{state.tokenize=doctype(depth-1);return state.tokenize(stream,state)}}}return"meta"}}var curState,curStream,setStyle;function pass(){for(var i=arguments.length-1;i>=0;i--)curState.cc.push(arguments[i])}function cont(){pass.apply(null,arguments);return true}function pushContext(tagName,startOfLine){var noIndent=Kludges.doNotIndent.hasOwnProperty(tagName)||curState.context&&curState.context.noIndent;curState.context={prev:curState.context,tagName:tagName,indent:curState.indented,startOfLine:startOfLine,noIndent:noIndent}}function popContext(){if(curState.context)curState.context=curState.context.prev}function element(type){if(type=="openTag"){curState.tagName=tagName;curState.tagStart=curStream.column();return cont(attributes,endtag(curState.startOfLine))}else if(type=="closeTag"){var err=false;if(curState.context){if(curState.context.tagName!=tagName){if(Kludges.implicitlyClosed.hasOwnProperty(curState.context.tagName.toLowerCase())){popContext()}err=!curState.context||curState.context.tagName!=tagName}}else{err=true}if(err)setStyle="error";return cont(endclosetag(err))}return cont()}function endtag(startOfLine){return function(type){var tagName=curState.tagName;curState.tagName=curState.tagStart=null;if(type=="selfcloseTag"||type=="endTag"&&Kludges.autoSelfClosers.hasOwnProperty(tagName.toLowerCase())){maybePopContext(tagName.toLowerCase());return cont()}if(type=="endTag"){maybePopContext(tagName.toLowerCase());pushContext(tagName,startOfLine);return cont()}return cont()}}function endclosetag(err){return function(type){if(err)setStyle="error";if(type=="endTag"){popContext();return cont()}setStyle="error";return cont(arguments.callee)}}function maybePopContext(nextTagName){var parentTagName;while(true){if(!curState.context){return}parentTagName=curState.context.tagName.toLowerCase();if(!Kludges.contextGrabbers.hasOwnProperty(parentTagName)||!Kludges.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)){return}popContext()}}function attributes(type){if(type=="word"){setStyle="attribute";return cont(attribute,attributes)}if(type=="endTag"||type=="selfcloseTag")return pass();setStyle="error";return cont(attributes)}function attribute(type){if(type=="equals")return cont(attvalue,attributes);if(!Kludges.allowMissing)setStyle="error";else if(type=="word")setStyle="attribute";return type=="endTag"||type=="selfcloseTag"?pass():cont()}function attvalue(type){if(type=="string")return cont(attvaluemaybe);if(type=="word"&&Kludges.allowUnquoted){setStyle="string";return cont()}setStyle="error";return type=="endTag"||type=="selfCloseTag"?pass():cont()}function attvaluemaybe(type){if(type=="string")return cont(attvaluemaybe);else return pass()}return{startState:function(){return{tokenize:inText,cc:[],indented:0,startOfLine:true,tagName:null,tagStart:null,context:null}},token:function(stream,state){if(!state.tagName&&stream.sol()){state.startOfLine=true;state.indented=stream.indentation()}if(stream.eatSpace())return null;setStyle=type=tagName=null;var style=state.tokenize(stream,state);state.type=type;if((style||type)&&style!="comment"){curState=state;curStream=stream;while(true){var comb=state.cc.pop()||element;if(comb(type||style))break}}state.startOfLine=false;return setStyle||style},indent:function(state,textAfter,fullLine){var context=state.context;if(state.tokenize!=inTag&&state.tokenize!=inText||context&&context.noIndent)return fullLine?fullLine.match(/^(\s*)/)[0].length:0;if(state.tagName)return state.tagStart+indentUnit*multilineTagIndentFactor;if(alignCDATA&&/<!\[CDATA\[/.test(textAfter))return 0;if(context&&/^<\//.test(textAfter))context=context.prev;while(context&&!context.startOfLine)context=context.prev;if(context)return context.indent+indentUnit;else return 0},electricChars:"/",configuration:parserConfig.htmlMode?"html":"xml"}});CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");if(!CodeMirror.mimeModes.hasOwnProperty("text/html"))CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});CodeMirror.defineMode("htmlmixed",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,{name:"xml",htmlMode:true});var cssMode=CodeMirror.getMode(config,"css");var scriptTypes=[],scriptTypesConf=parserConfig&&parserConfig.scriptTypes;scriptTypes.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(config,"javascript")});if(scriptTypesConf)for(var i=0;i<scriptTypesConf.length;++i){var conf=scriptTypesConf[i];scriptTypes.push({matches:conf.matches,mode:conf.mode&&CodeMirror.getMode(config,conf.mode)})}scriptTypes.push({matches:/./,mode:CodeMirror.getMode(config,"text/plain")});function html(stream,state){var tagName=state.htmlState.tagName;var style=htmlMode.token(stream,state.htmlState);if(tagName=="script"&&/\btag\b/.test(style)&&stream.current()==">"){var scriptType=stream.string.slice(Math.max(0,stream.pos-100),stream.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);scriptType=scriptType?scriptType[1]:"";if(scriptType&&/[\"\']/.test(scriptType.charAt(0)))scriptType=scriptType.slice(1,scriptType.length-1);for(var i=0;i<scriptTypes.length;++i){var tp=scriptTypes[i];if(typeof tp.matches=="string"?scriptType==tp.matches:tp.matches.test(scriptType)){if(tp.mode){state.token=script;state.localMode=tp.mode;state.localState=tp.mode.startState&&tp.mode.startState(htmlMode.indent(state.htmlState,""))}break}}}else if(tagName=="style"&&/\btag\b/.test(style)&&stream.current()==">"){state.token=css;state.localMode=cssMode;state.localState=cssMode.startState(htmlMode.indent(state.htmlState,""))}return style}function maybeBackup(stream,pat,style){var cur=stream.current();var close=cur.search(pat),m;if(close>-1)stream.backUp(cur.length-close);else if(m=cur.match(/<\/?$/)){stream.backUp(cur.length);if(!stream.match(pat,false))stream.match(cur[0])}return style}function script(stream,state){if(stream.match(/^<\/\s*script\s*>/i,false)){state.token=html;state.localState=state.localMode=null;return html(stream,state)}return maybeBackup(stream,/<\/\s*script\s*>/,state.localMode.token(stream,state.localState))}function css(stream,state){if(stream.match(/^<\/\s*style\s*>/i,false)){state.token=html;state.localState=state.localMode=null;return html(stream,state)}return maybeBackup(stream,/<\/\s*style\s*>/,cssMode.token(stream,state.localState))}return{startState:function(){var state=htmlMode.startState();return{token:html,localMode:null,localState:null,htmlState:state}},copyState:function(state){if(state.localState)var local=CodeMirror.copyState(state.localMode,state.localState);return{token:state.token,localMode:state.localMode,localState:local,htmlState:CodeMirror.copyState(htmlMode,state.htmlState)}},token:function(stream,state){return state.token(stream,state)},indent:function(state,textAfter){if(!state.localMode||/^\s*<\//.test(textAfter))return htmlMode.indent(state.htmlState,textAfter);else if(state.localMode.indent)return state.localMode.indent(state.localState,textAfter);else return CodeMirror.Pass},electricChars:"/{}:",innerMode:function(state){return{state:state.localState||state.htmlState,mode:state.localMode||htmlMode}}}},"xml","javascript","css");CodeMirror.defineMIME("text/html","htmlmixed");CodeMirror.defineMode("clike",function(config,parserConfig){var indentUnit=config.indentUnit,statementIndentUnit=parserConfig.statementIndentUnit||indentUnit,dontAlignCalls=parserConfig.dontAlignCalls,keywords=parserConfig.keywords||{},builtin=parserConfig.builtin||{},blockKeywords=parserConfig.blockKeywords||{},atoms=parserConfig.atoms||{},hooks=parserConfig.hooks||{},multiLineStrings=parserConfig.multiLineStrings;var isOperatorChar=/[+\-*&%=<>!?|\/]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(result!==false)return result}if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}if(/[\[\]{}\(\),;\:\.]/.test(ch)){curPunc=ch;return null}if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}if(stream.eat("/")){stream.skipToEnd();return"comment"}}if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}stream.eatWhile(/[\w\$_]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"keyword"}if(builtin.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"builtin"}if(atoms.propertyIsEnumerable(cur))return"atom";return"variable"}function tokenString(quote){return function(stream,state){var escaped=false,next,end=false;while((next=stream.next())!=null){if(next==quote&&!escaped){end=true;break}escaped=!escaped&&next=="\\"}if(end||!(escaped||multiLineStrings))state.tokenize=null;return"string"}}function tokenComment(stream,state){var maybeEnd=false,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=null;break}maybeEnd=ch=="*"}return"comment"}function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}function pushContext(state,col,type){var indent=state.indented;if(state.context&&state.context.type=="statement")indent=state.context.indented;return state.context=new Context(indent,col,type,null,state.context)}function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")state.indented=state.context.indented;return state.context=state.context.prev}return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",false),indented:0,startOfLine:true}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=false;state.indented=stream.indentation();state.startOfLine=true}if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta")return style;if(ctx.align==null)ctx.align=true;if((curPunc==";"||curPunc==":"||curPunc==",")&&ctx.type=="statement")popContext(state);else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state)}else if(curPunc==ctx.type)popContext(state);else if((ctx.type=="}"||ctx.type=="top")&&curPunc!=";"||ctx.type=="statement"&&curPunc=="newstatement")pushContext(state,stream.column(),"statement");state.startOfLine=false;return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null)return CodeMirror.Pass;var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if(ctx.type=="statement"&&firstChar=="}")ctx=ctx.prev;var closing=firstChar==ctx.type;if(ctx.type=="statement")return ctx.indented+(firstChar=="{"?0:statementIndentUnit);else if(dontAlignCalls&&ctx.type==")"&&!closing)return ctx.indented+statementIndentUnit;else if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indented+(closing?0:indentUnit)},electricChars:"{}"}});(function(){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=true;return obj}var cKeywords="auto if break int case long char register continue return default short do sizeof "+"double static else struct entry switch extern typedef float union for unsigned "+"goto while enum void const signed volatile";function cppHook(stream,state){if(!state.startOfLine)return false;for(;;){if(stream.skipTo("\\")){stream.next();if(stream.eol()){state.tokenize=cppHook;break}}else{stream.skipToEnd();state.tokenize=null;break}}return"meta"}function tokenAtString(stream,state){var next;while((next=stream.next())!=null){if(next=='"'&&!stream.eat('"')){state.tokenize=null;break}}return"string"}function mimes(ms,mode){for(var i=0;i<ms.length;++i)CodeMirror.defineMIME(ms[i],mode)}mimes(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:words(cKeywords),blockKeywords:words("case do else for if switch while struct"),atoms:words("null"),hooks:{"#":cppHook}});mimes(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:words(cKeywords+" asm dynamic_cast namespace reinterpret_cast try bool explicit new "+"static_cast typeid catch operator template typename class friend private "+"this using const_cast inline public throw virtual delete mutable protected "+"wchar_t"),blockKeywords:words("catch class do else finally for if struct switch try while"),atoms:words("true false null"),hooks:{"#":cppHook}});CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:words("abstract assert boolean break byte case catch char class const continue default "+"do double else enum extends final finally float for goto if implements import "+"instanceof int interface long native new package private protected public "+"return short static strictfp super switch synchronized this throw throws transient "+"try void volatile while"),blockKeywords:words("catch class do else finally for if switch try while"),atoms:words("true false null"),hooks:{"@":function(stream){stream.eatWhile(/[\w\$_]/);return"meta"}}});CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:words("abstract as base break case catch checked class const continue"+" default delegate do else enum event explicit extern finally fixed for"+" foreach goto if implicit in interface internal is lock namespace new"+" operator out override params private protected public readonly ref return sealed"+" sizeof stackalloc static struct switch this throw try typeof unchecked"+" unsafe using virtual void volatile while add alias ascending descending dynamic from get"+" global group into join let orderby partial remove select set value var yield"),blockKeywords:words("catch class do else finally for foreach if struct switch try while"),builtin:words("Boolean Byte Char DateTime DateTimeOffset Decimal Double"+" Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32"+" UInt64 bool byte char decimal double short int long object"+" sbyte float string ushort uint ulong"),atoms:words("true false null"),hooks:{"@":function(stream,state){if(stream.eat('"')){state.tokenize=tokenAtString;return tokenAtString(stream,state)}stream.eatWhile(/[\w\$_]/);return"meta"}}});CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:words("abstract case catch class def do else extends false final finally for forSome if "+"implicit import lazy match new null object override package private protected return "+"sealed super this throw trait try trye type val var while with yield _ : = => <- <: "+"<% >: # @ "+"assert assume require print println printf readLine readBoolean readByte readShort "+"readChar readInt readLong readFloat readDouble "+"AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either "+"Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable "+"Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering "+"Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder "+"StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: "+"Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable "+"Compiler Double Exception Float Integer Long Math Number Object Package Pair Process "+"Runtime Runnable SecurityManager Short StackTraceElement StrictMath String "+"StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:words("catch class do else finally for forSome if match switch try while"),atoms:words("true false null"),hooks:{"@":function(stream){stream.eatWhile(/[\w\$_]/);return"meta"}}})})();(function(){"use strict";var defaultKeymap=[{keys:["Left"],type:"keyToKey",toKeys:["h"]},{keys:["Right"],type:"keyToKey",toKeys:["l"]},{keys:["Up"],type:"keyToKey",toKeys:["k"]},{keys:["Down"],type:"keyToKey",toKeys:["j"]},{keys:["Space"],type:"keyToKey",toKeys:["l"]},{keys:["Backspace"],type:"keyToKey",toKeys:["h"]},{keys:["Ctrl-Space"],type:"keyToKey",toKeys:["W"]},{keys:["Ctrl-Backspace"],type:"keyToKey",toKeys:["B"]},{keys:["Shift-Space"],type:"keyToKey",toKeys:["w"]},{keys:["Shift-Backspace"],type:"keyToKey",toKeys:["b"]},{keys:["Ctrl-n"],type:"keyToKey",toKeys:["j"]},{keys:["Ctrl-p"],type:"keyToKey",toKeys:["k"]},{keys:["Ctrl-["],type:"keyToKey",toKeys:["Esc"]},{keys:["Ctrl-c"],type:"keyToKey",toKeys:["Esc"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"]},{keys:["S"],type:"keyToKey",toKeys:["c","c"]},{keys:["Home"],type:"keyToKey",toKeys:["0"]},{keys:["End"],type:"keyToKey",toKeys:["$"]},{keys:["PageUp"],type:"keyToKey",toKeys:["Ctrl-b"]},{keys:["PageDown"],type:"keyToKey",toKeys:["Ctrl-f"]},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:false}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,linewise:true}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,linewise:true}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:true}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:false}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false,bigWord:true}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,inclusive:true}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,bigWord:true,inclusive:true}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false,bigWord:true}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,inclusive:true}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,bigWord:true,inclusive:true}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:false}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:true}},{keys:["Ctrl-f"],type:"motion",motion:"moveByPage",motionArgs:{forward:true}},{keys:["Ctrl-b"],type:"motion",motion:"moveByPage",motionArgs:{forward:false}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:true,explicitRepeat:true,linewise:true}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,toFirstChar:true}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:true}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:true}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:false}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:false}},{keys:["'","character"],type:"motion",motion:"goToMark"},{keys:["`","character"],type:"motion",motion:"goToMark"},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true,linewise:true}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false,linewise:true}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change",operatorArgs:{enterInsertMode:true}},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:true}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:false}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:true}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:false}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:true},operatorMotionArgs:{visualLine:false}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:false},operatorMotionArgs:{visualLine:true}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["C"],type:"operatorMotion",operator:"change",operatorArgs:{enterInsertMode:true},motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["~"],type:"operatorMotion",operator:"swapcase",motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["a"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode"},{keys:["I"],type:"action",action:"enterInsertMode",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:true}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:false}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:true}},{keys:["J"],type:"action",action:"joinLines"},{keys:["p"],type:"action",action:"paste",actionArgs:{after:true}},{keys:["P"],type:"action",action:"paste",actionArgs:{after:false}},{keys:["r","character"],type:"action",action:"replace"},{keys:["u"],type:"action",action:"undo"},{keys:["Ctrl-r"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","Enter"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:true}},{keys:["/"],type:"search",searchArgs:{forward:true,querySrc:"prompt"}},{keys:["?"],type:"search",searchArgs:{forward:false,querySrc:"prompt"}},{keys:["*"],type:"search",searchArgs:{forward:true,querySrc:"wordUnderCursor"}},{keys:["#"],type:"search",searchArgs:{forward:false,querySrc:"wordUnderCursor"}},{keys:[":"],type:"ex"}];
var Vim=function(){var alphabetRegex=/[A-Za-z]/;var numberRegex=/[\d]/;var whiteSpaceRegex=/\s/;var wordRegexp=[/\w/,/[^\w\s]/],bigWordRegexp=[/\S/];function makeKeyRange(start,size){var keys=[];for(var i=start;i<start+size;i++){keys.push(String.fromCharCode(i))}return keys}var upperCaseAlphabet=makeKeyRange(65,26);var lowerCaseAlphabet=makeKeyRange(97,26);var numbers=makeKeyRange(48,10);var SPECIAL_SYMBOLS="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'";var specialSymbols=SPECIAL_SYMBOLS.split("");var specialKeys=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"];var validMarks=upperCaseAlphabet.concat(lowerCaseAlphabet).concat(numbers).concat(["<",">"]);var validRegisters=upperCaseAlphabet.concat(lowerCaseAlphabet).concat(numbers).concat('-"'.split(""));function isAlphabet(k){return alphabetRegex.test(k)}function isLine(cm,line){return line>=cm.firstLine()&&line<=cm.lastLine()}function isLowerCase(k){return/^[a-z]$/.test(k)}function isMatchableSymbol(k){return"()[]{}".indexOf(k)!=-1}function isNumber(k){return numberRegex.test(k)}function isUpperCase(k){return/^[A-Z]$/.test(k)}function isAlphanumeric(k){return/^[\w]$/.test(k)}function isWhiteSpace(k){return whiteSpaceRegex.test(k)}function isWhiteSpaceString(k){return/^\s*$/.test(k)}function inRangeInclusive(x,start,end){return x>=start&&x<=end}function inArray(val,arr){for(var i=0;i<arr.length;i++){if(arr[i]==val){return true}}return false}var vimGlobalState;function getVimGlobalState(){if(!vimGlobalState){vimGlobalState={searchQuery:null,searchIsReversed:false,registerController:new RegisterController({})}}return vimGlobalState}function getVimState(cm){if(!cm.vimState){cm.vimState={inputState:new InputState,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},visualMode:false,visualLine:false}}return cm.vimState}var vimApi={buildKeyMap:function(){},getRegisterController:function(){return getVimGlobalState().registerController},clearVimGlobalState_:function(){vimGlobalState=null},map:function(lhs,rhs){exCommandDispatcher.map(lhs,rhs)},defineEx:function(name,prefix,func){if(name.indexOf(prefix)===0){exCommands[name]=func;exCommandDispatcher.commandMap_[prefix]={name:name,shortName:prefix,type:"api"}}else throw new Error('(Vim.defineEx) "'+prefix+'" is not a prefix of "'+name+'", command not registered')},maybeInitState:function(cm){getVimState(cm)},handleKey:function(cm,key){var command;var vim=getVimState(cm);if(key=="Esc"){vim.inputState=new InputState;if(vim.visualMode){exitVisualMode(cm,vim)}return}if(vim.visualMode&&cursorEqual(cm.getCursor("head"),cm.getCursor("anchor"))){exitVisualMode(cm,vim)}if(!vim.visualMode&&!cursorEqual(cm.getCursor("head"),cm.getCursor("anchor"))){vim.visualMode=true;vim.visualLine=false}if(key!="0"||key=="0"&&vim.inputState.getRepeat()===0){command=commandDispatcher.matchCommand(key,defaultKeymap,vim)}if(!command){if(isNumber(key)){vim.inputState.pushRepeatDigit(key)}return}if(command.type=="keyToKey"){for(var i=0;i<command.toKeys.length;i++){this.handleKey(cm,command.toKeys[i])}}else{commandDispatcher.processCommand(cm,vim,command)}}};function InputState(){this.prefixRepeat=[];this.motionRepeat=[];this.operator=null;this.operatorArgs=null;this.motion=null;this.motionArgs=null;this.keyBuffer=[];this.registerName=null}InputState.prototype.pushRepeatDigit=function(n){if(!this.operator){this.prefixRepeat=this.prefixRepeat.concat(n)}else{this.motionRepeat=this.motionRepeat.concat(n)}};InputState.prototype.getRepeat=function(){var repeat=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0){repeat=1;if(this.prefixRepeat.length>0){repeat*=parseInt(this.prefixRepeat.join(""),10)}if(this.motionRepeat.length>0){repeat*=parseInt(this.motionRepeat.join(""),10)}}return repeat};function Register(text,linewise){this.clear();if(text){this.set(text,linewise)}}Register.prototype={set:function(text,linewise){this.text=text;this.linewise=!!linewise},append:function(text,linewise){if(linewise||this.linewise){this.text+="\n"+text;this.linewise=true}else{this.text+=text}},clear:function(){this.text="";this.linewise=false},toString:function(){return this.text}};function RegisterController(registers){this.registers=registers;this.unamedRegister=registers['"']=new Register}RegisterController.prototype={pushText:function(registerName,operator,text,linewise){var register=this.isValidRegister(registerName)?this.getRegister(registerName):null;if(!register){switch(operator){case"yank":this.registers["0"]=new Register(text,linewise);break;case"delete":case"change":if(text.indexOf("\n")==-1){this.registers["-"]=new Register(text,linewise)}else{this.shiftNumericRegisters_();this.registers["1"]=new Register(text,linewise)}break}this.unamedRegister.set(text,linewise);return}var append=isUpperCase(registerName);if(append){register.append(text,linewise);this.unamedRegister.append(text,linewise)}else{register.set(text,linewise);this.unamedRegister.set(text,linewise)}},getRegister:function(name){if(!this.isValidRegister(name)){return this.unamedRegister}name=name.toLowerCase();if(!this.registers[name]){this.registers[name]=new Register}return this.registers[name]},isValidRegister:function(name){return name&&inArray(name,validRegisters)},shiftNumericRegisters_:function(){for(var i=9;i>=2;i--){this.registers[i]=this.getRegister(""+(i-1))}}};var commandDispatcher={matchCommand:function(key,keyMap,vim){var inputState=vim.inputState;var keys=inputState.keyBuffer.concat(key);for(var i=0;i<keyMap.length;i++){var command=keyMap[i];if(matchKeysPartial(keys,command.keys)){if(keys.length<command.keys.length){inputState.keyBuffer.push(key);return null}else{if(inputState.operator&&command.type=="action"){continue}if(command.keys[keys.length-1]=="character"){inputState.selectedCharacter=keys[keys.length-1];if(inputState.selectedCharacter.length>1){switch(inputState.selectedCharacter){case"Enter":inputState.selectedCharacter="\n";break;case"Space":inputState.selectedCharacter=" ";break;default:continue}}}inputState.keyBuffer=[];return command}}}inputState.keyBuffer=[];return null},processCommand:function(cm,vim,command){vim.inputState.repeatOverride=command.repeatOverride;switch(command.type){case"motion":this.processMotion(cm,vim,command);break;case"operator":this.processOperator(cm,vim,command);break;case"operatorMotion":this.processOperatorMotion(cm,vim,command);break;case"action":this.processAction(cm,vim,command);break;case"search":this.processSearch(cm,vim,command);break;case"ex":case"keyToEx":this.processEx(cm,vim,command);break;default:break}},processMotion:function(cm,vim,command){vim.inputState.motion=command.motion;vim.inputState.motionArgs=copyArgs(command.motionArgs);this.evalInput(cm,vim)},processOperator:function(cm,vim,command){var inputState=vim.inputState;if(inputState.operator){if(inputState.operator==command.operator){inputState.motion="expandToLine";inputState.motionArgs={linewise:true};this.evalInput(cm,vim);return}else{vim.inputState=new InputState}}inputState.operator=command.operator;inputState.operatorArgs=copyArgs(command.operatorArgs);if(vim.visualMode){this.evalInput(cm,vim)}},processOperatorMotion:function(cm,vim,command){var visualMode=vim.visualMode;var operatorMotionArgs=copyArgs(command.operatorMotionArgs);if(operatorMotionArgs){if(visualMode&&operatorMotionArgs.visualLine){vim.visualLine=true}}this.processOperator(cm,vim,command);if(!visualMode){this.processMotion(cm,vim,command)}},processAction:function(cm,vim,command){var inputState=vim.inputState;var repeat=inputState.getRepeat();var repeatIsExplicit=!!repeat;var actionArgs=copyArgs(command.actionArgs)||{};if(inputState.selectedCharacter){actionArgs.selectedCharacter=inputState.selectedCharacter}if(command.operator){this.processOperator(cm,vim,command)}if(command.motion){this.processMotion(cm,vim,command)}if(command.motion||command.operator){this.evalInput(cm,vim)}actionArgs.repeat=repeat||1;actionArgs.repeatIsExplicit=repeatIsExplicit;actionArgs.registerName=inputState.registerName;vim.inputState=new InputState;vim.lastMotion=null,actions[command.action](cm,actionArgs,vim)},processSearch:function(cm,vim,command){if(!cm.getSearchCursor){return}var forward=command.searchArgs.forward;getSearchState(cm).setReversed(!forward);var promptPrefix=forward?"/":"?";var originalQuery=getSearchState(cm).getQuery();var originalScrollPos=cm.getScrollInfo();function handleQuery(query,ignoreCase,smartCase){try{updateSearchQuery(cm,query,ignoreCase,smartCase)}catch(e){showConfirm(cm,"Invalid regex: "+regexPart);return}commandDispatcher.processMotion(cm,vim,{type:"motion",motion:"findNext",motionArgs:{forward:true}})}function onPromptClose(query){cm.scrollTo(originalScrollPos.left,originalScrollPos.top);handleQuery(query,true,true)}function onPromptKeyUp(e,query){var parsedQuery;try{parsedQuery=updateSearchQuery(cm,query,true,true)}catch(e){}if(parsedQuery){cm.scrollIntoView(findNext(cm,!forward,parsedQuery),30)}else{clearSearchHighlight(cm);cm.scrollTo(originalScrollPos.left,originalScrollPos.top)}}function onPromptKeyDown(e,query,close){var keyName=CodeMirror.keyName(e);if(keyName=="Esc"||keyName=="Ctrl-C"||keyName=="Ctrl-["){updateSearchQuery(cm,originalQuery);clearSearchHighlight(cm);cm.scrollTo(originalScrollPos.left,originalScrollPos.top);CodeMirror.e_stop(e);close();cm.focus()}}switch(command.searchArgs.querySrc){case"prompt":showPrompt(cm,{onClose:onPromptClose,prefix:promptPrefix,desc:searchPromptDesc,onKeyUp:onPromptKeyUp,onKeyDown:onPromptKeyDown});break;case"wordUnderCursor":var word=expandWordUnderCursor(cm,false,true,false,true);var isKeyword=true;if(!word){word=expandWordUnderCursor(cm,false,true,false,false);isKeyword=false}if(!word){return}var query=cm.getLine(word.start.line).substring(word.start.ch,word.end.ch+1);if(isKeyword){query="\\b"+query+"\\b"}else{query=escapeRegex(query)}cm.setCursor(word.start);handleQuery(query,true,false);break}},processEx:function(cm,vim,command){function onPromptClose(input){exCommandDispatcher.processCommand(cm,input)}function onPromptKeyDown(e,input,close){var keyName=CodeMirror.keyName(e);if(keyName=="Esc"||keyName=="Ctrl-C"||keyName=="Ctrl-["){CodeMirror.e_stop(e);close();cm.focus()}}if(command.type=="keyToEx"){exCommandDispatcher.processCommand(cm,command.exArgs.input)}else{if(vim.visualMode){showPrompt(cm,{onClose:onPromptClose,prefix:":",value:"'<,'>",onKeyDown:onPromptKeyDown})}else{showPrompt(cm,{onClose:onPromptClose,prefix:":",onKeyDown:onPromptKeyDown})}}},evalInput:function(cm,vim){var inputState=vim.inputState;var motion=inputState.motion;var motionArgs=inputState.motionArgs||{};var operator=inputState.operator;var operatorArgs=inputState.operatorArgs||{};var registerName=inputState.registerName;var selectionEnd=cm.getCursor("head");var selectionStart=cm.getCursor("anchor");var curStart=copyCursor(selectionEnd);var curOriginal=copyCursor(curStart);var curEnd;var repeat;if(operator){this.recordLastEdit(cm,vim,inputState)}if(inputState.repeatOverride!==undefined){repeat=inputState.repeatOverride}else{repeat=inputState.getRepeat()}if(repeat>0&&motionArgs.explicitRepeat){motionArgs.repeatIsExplicit=true}else if(motionArgs.noRepeat||!motionArgs.explicitRepeat&&repeat===0){repeat=1;motionArgs.repeatIsExplicit=false}if(inputState.selectedCharacter){motionArgs.selectedCharacter=operatorArgs.selectedCharacter=inputState.selectedCharacter}motionArgs.repeat=repeat;vim.inputState=new InputState;if(motion){var motionResult=motions[motion](cm,motionArgs,vim);vim.lastMotion=motions[motion];if(!motionResult){return}if(motionResult instanceof Array){curStart=motionResult[0];curEnd=motionResult[1]}else{curEnd=motionResult}if(!curEnd){curEnd={ch:curStart.ch,line:curStart.line}}if(vim.visualMode){if(cursorIsBefore(selectionStart,selectionEnd)&&(cursorEqual(selectionStart,curEnd)||cursorIsBefore(curEnd,selectionStart))){selectionStart.ch+=1}else if(cursorIsBefore(selectionEnd,selectionStart)&&(cursorEqual(selectionStart,curEnd)||cursorIsBefore(selectionStart,curEnd))){selectionStart.ch-=1}selectionEnd=curEnd;if(vim.visualLine){if(cursorIsBefore(selectionStart,selectionEnd)){selectionStart.ch=0;selectionEnd.ch=lineLength(cm,selectionEnd.line)}else{selectionEnd.ch=0;selectionStart.ch=lineLength(cm,selectionStart.line)}}cm.setSelection(selectionStart,selectionEnd);updateMark(cm,vim,"<",cursorIsBefore(selectionStart,selectionEnd)?selectionStart:selectionEnd);updateMark(cm,vim,">",cursorIsBefore(selectionStart,selectionEnd)?selectionEnd:selectionStart)}else if(!operator){curEnd=clipCursorToContent(cm,curEnd);cm.setCursor(curEnd.line,curEnd.ch)}}if(operator){var inverted=false;vim.lastMotion=null;operatorArgs.repeat=repeat;if(vim.visualMode){curStart=selectionStart;curEnd=selectionEnd;motionArgs.inclusive=true}if(cursorIsBefore(curEnd,curStart)){var tmp=curStart;curStart=curEnd;curEnd=tmp;inverted=true}if(motionArgs.inclusive&&!(vim.visualMode&&inverted)){curEnd.ch++}var linewise=motionArgs.linewise||vim.visualMode&&vim.visualLine;if(linewise){expandSelectionToLine(cm,curStart,curEnd)}else if(motionArgs.forward){clipToLine(cm,curStart,curEnd)}operatorArgs.registerName=registerName;operatorArgs.linewise=linewise;operators[operator](cm,operatorArgs,vim,curStart,curEnd,curOriginal);if(vim.visualMode){exitVisualMode(cm,vim)}if(operatorArgs.enterInsertMode){actions.enterInsertMode(cm)}}},recordLastEdit:function(cm,vim,inputState){vim.lastEdit=inputState}};var motions={expandToLine:function(cm,motionArgs){var cur=cm.getCursor();return{line:cur.line+motionArgs.repeat-1,ch:Infinity}},findNext:function(cm,motionArgs,vim){var state=getSearchState(cm);var query=state.getQuery();if(!query){return}var prev=!motionArgs.forward;prev=state.isReversed()?!prev:prev;highlightSearchMatches(cm,query);return findNext(cm,prev,query,motionArgs.repeat)},goToMark:function(cm,motionArgs,vim){var mark=vim.marks[motionArgs.selectedCharacter];if(mark){return mark.find()}return null},jumpToMark:function(cm,motionArgs,vim){var best=cm.getCursor();for(var i=0;i<motionArgs.repeat;i++){var cursor=best;for(var key in vim.marks){if(!isLowerCase(key)){continue}var mark=vim.marks[key].find();var isWrongDirection=motionArgs.forward?cursorIsBefore(mark,cursor):cursorIsBefore(cursor,mark);if(isWrongDirection){continue}if(motionArgs.linewise&&mark.line==cursor.line){continue}var equal=cursorEqual(cursor,best);var between=motionArgs.forward?cusrorIsBetween(cursor,mark,best):cusrorIsBetween(best,mark,cursor);if(equal||between){best=mark}}}if(motionArgs.linewise){best.ch=findFirstNonWhiteSpaceCharacter(cm.getLine(best.line))}return best},moveByCharacters:function(cm,motionArgs){var cur=cm.getCursor();var repeat=motionArgs.repeat;var ch=motionArgs.forward?cur.ch+repeat:cur.ch-repeat;return{line:cur.line,ch:ch}},moveByLines:function(cm,motionArgs,vim){var cur=cm.getCursor();var endCh=cur.ch;switch(vim.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveToColumn:case this.moveToEol:endCh=vim.lastHPos;break;default:vim.lastHPos=endCh}var repeat=motionArgs.repeat+(motionArgs.repeatOffset||0);var line=motionArgs.forward?cur.line+repeat:cur.line-repeat;if(line<cm.firstLine()||line>cm.lastLine()){return null}if(motionArgs.toFirstChar){endCh=findFirstNonWhiteSpaceCharacter(cm.getLine(line));vim.lastHPos=endCh}vim.lastHSPos=cm.charCoords({line:line,ch:endCh},"div").left;return{line:line,ch:endCh}},moveByDisplayLines:function(cm,motionArgs,vim){var cur=cm.getCursor();switch(vim.lastMotion){case this.moveByDisplayLines:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:vim.lastHSPos=cm.charCoords(cur,"div").left}var repeat=motionArgs.repeat;var res=cm.findPosV(cur,motionArgs.forward?repeat:-repeat,"line",vim.lastHSPos);if(res.hitSide)return null;vim.lastHPos=res.ch;return res},moveByPage:function(cm,motionArgs){var curStart=cm.getCursor();var repeat=motionArgs.repeat;cm.moveV(motionArgs.forward?repeat:-repeat,"page");var curEnd=cm.getCursor();cm.setCursor(curStart);return curEnd},moveByParagraph:function(cm,motionArgs){var line=cm.getCursor().line;var repeat=motionArgs.repeat;var inc=motionArgs.forward?1:-1;for(var i=0;i<repeat;i++){if(!motionArgs.forward&&line===cm.firstLine()||motionArgs.forward&&line==cm.lastLine()){break}line+=inc;while(line!==cm.firstLine()&&line!=cm.lastLine()&&cm.getLine(line)){line+=inc}}return{line:line,ch:0}},moveByWords:function(cm,motionArgs){return moveToWord(cm,motionArgs.repeat,!!motionArgs.forward,!!motionArgs.wordEnd,!!motionArgs.bigWord)},moveTillCharacter:function(cm,motionArgs){var repeat=motionArgs.repeat;var curEnd=moveToCharacter(cm,repeat,motionArgs.forward,motionArgs.selectedCharacter);if(!curEnd)return cm.getCursor();var increment=motionArgs.forward?-1:1;curEnd.ch+=increment;return curEnd},moveToCharacter:function(cm,motionArgs){var repeat=motionArgs.repeat;return moveToCharacter(cm,repeat,motionArgs.forward,motionArgs.selectedCharacter)||cm.getCursor()},moveToColumn:function(cm,motionArgs,vim){var repeat=motionArgs.repeat;vim.lastHPos=repeat-1;vim.lastHSPos=cm.charCoords(cm.getCursor(),"div").left;return moveToColumn(cm,repeat)},moveToEol:function(cm,motionArgs,vim){var cur=cm.getCursor();vim.lastHPos=Infinity;var retval={line:cur.line+motionArgs.repeat-1,ch:Infinity};var end=cm.clipPos(retval);end.ch--;vim.lastHSPos=cm.charCoords(end,"div").left;return retval},moveToFirstNonWhiteSpaceCharacter:function(cm){var cursor=cm.getCursor();return{line:cursor.line,ch:findFirstNonWhiteSpaceCharacter(cm.getLine(cursor.line))}},moveToMatchedSymbol:function(cm,motionArgs){var cursor=cm.getCursor();var symbol=cm.getLine(cursor.line).charAt(cursor.ch);if(isMatchableSymbol(symbol)){return findMatchedSymbol(cm,cm.getCursor(),motionArgs.symbol)}else{return cursor}},moveToStartOfLine:function(cm){var cursor=cm.getCursor();return{line:cursor.line,ch:0}},moveToLineOrEdgeOfDocument:function(cm,motionArgs){var lineNum=motionArgs.forward?cm.lastLine():cm.firstLine();if(motionArgs.repeatIsExplicit){lineNum=motionArgs.repeat-cm.getOption("firstLineNumber")}return{line:lineNum,ch:findFirstNonWhiteSpaceCharacter(cm.getLine(lineNum))}},textObjectManipulation:function(cm,motionArgs){var character=motionArgs.selectedCharacter;var inclusive=!motionArgs.textObjectInner;if(!textObjects[character]){return null}var tmp=textObjects[character](cm,inclusive);var start=tmp.start;var end=tmp.end;return[start,end]}};var operators={change:function(cm,operatorArgs,vim,curStart,curEnd){getVimGlobalState().registerController.pushText(operatorArgs.registerName,"change",cm.getRange(curStart,curEnd),operatorArgs.linewise);if(operatorArgs.linewise){curStart.ch=findFirstNonWhiteSpaceCharacter(cm.getLine(curStart.line));cm.replaceRange("\n",curStart,curEnd)}else{cm.replaceRange("",curStart,curEnd)}cm.setCursor(curStart)},"delete":function(cm,operatorArgs,vim,curStart,curEnd){getVimGlobalState().registerController.pushText(operatorArgs.registerName,"delete",cm.getRange(curStart,curEnd),operatorArgs.linewise);cm.replaceRange("",curStart,curEnd);if(operatorArgs.linewise){cm.setCursor(motions.moveToFirstNonWhiteSpaceCharacter(cm))}else{cm.setCursor(curStart)}},indent:function(cm,operatorArgs,vim,curStart,curEnd){var startLine=curStart.line;var endLine=curEnd.line;var repeat=vim.visualMode?operatorArgs.repeat:1;if(operatorArgs.linewise){endLine--}for(var i=startLine;i<=endLine;i++){for(var j=0;j<repeat;j++){cm.indentLine(i,operatorArgs.indentRight)}}cm.setCursor(curStart);cm.setCursor(motions.moveToFirstNonWhiteSpaceCharacter(cm))},swapcase:function(cm,operatorArgs,vim,curStart,curEnd,curOriginal){var toSwap=cm.getRange(curStart,curEnd);var swapped="";for(var i=0;i<toSwap.length;i++){var character=toSwap.charAt(i);swapped+=isUpperCase(character)?character.toLowerCase():character.toUpperCase()}cm.replaceRange(swapped,curStart,curEnd);cm.setCursor(curOriginal)},yank:function(cm,operatorArgs,vim,curStart,curEnd,curOriginal){getVimGlobalState().registerController.pushText(operatorArgs.registerName,"yank",cm.getRange(curStart,curEnd),operatorArgs.linewise);cm.setCursor(curOriginal)}};var actions={scrollToCursor:function(cm,actionArgs){var lineNum=cm.getCursor().line;var heightProp=window.getComputedStyle(cm.getScrollerElement()).getPropertyValue("height");var height=parseInt(heightProp);var y=cm.charCoords({line:lineNum,ch:0},"local").top;var halfHeight=parseInt(height)/2;switch(actionArgs.position){case"center":y=y-height/2+10;break;case"bottom":y=y-height;break;case"top":break}cm.scrollTo(null,y);cm.scrollIntoView()},enterInsertMode:function(cm,actionArgs){var insertAt=actionArgs?actionArgs.insertAt:null;if(insertAt=="eol"){var cursor=cm.getCursor();cursor={line:cursor.line,ch:lineLength(cm,cursor.line)};cm.setCursor(cursor)}else if(insertAt=="charAfter"){cm.setCursor(offsetCursor(cm.getCursor(),0,1))}cm.setOption("keyMap","vim-insert")},toggleVisualMode:function(cm,actionArgs,vim){var repeat=actionArgs.repeat;var curStart=cm.getCursor();var curEnd;if(!vim.visualMode){vim.visualMode=true;vim.visualLine=!!actionArgs.linewise;if(vim.visualLine){curStart.ch=0;curEnd=clipCursorToContent(cm,{line:curStart.line+repeat-1,ch:lineLength(cm,curStart.line)},true)}else{curEnd=clipCursorToContent(cm,{line:curStart.line,ch:curStart.ch+repeat},true)}if(!actionArgs.repeatIsExplicit&&!vim.visualLine){cm.setCursor(curEnd);cm.setSelection(curEnd,curStart)}else{cm.setSelection(curStart,curEnd)}}else{curStart=cm.getCursor("anchor");curEnd=cm.getCursor("head");if(!vim.visualLine&&actionArgs.linewise){vim.visualLine=true;curStart.ch=cursorIsBefore(curStart,curEnd)?0:lineLength(cm,curStart.line);curEnd.ch=cursorIsBefore(curStart,curEnd)?lineLength(cm,curEnd.line):0;cm.setSelection(curStart,curEnd)}else if(vim.visualLine&&!actionArgs.linewise){vim.visualLine=false}else{exitVisualMode(cm,vim)}}updateMark(cm,vim,"<",cursorIsBefore(curStart,curEnd)?curStart:curEnd);updateMark(cm,vim,">",cursorIsBefore(curStart,curEnd)?curEnd:curStart)},joinLines:function(cm,actionArgs,vim){var curStart,curEnd;if(vim.visualMode){curStart=cm.getCursor("anchor");curEnd=cm.getCursor("head");curEnd.ch=lineLength(cm,curEnd.line)-1}else{var repeat=Math.max(actionArgs.repeat,2);curStart=cm.getCursor();curEnd=clipCursorToContent(cm,{line:curStart.line+repeat-1,ch:Infinity})}var finalCh=0;cm.operation(function(){for(var i=curStart.line;i<curEnd.line;i++){finalCh=lineLength(cm,curStart.line);var tmp={line:curStart.line+1,ch:lineLength(cm,curStart.line+1)};var text=cm.getRange(curStart,tmp);text=text.replace(/\n\s*/g," ");cm.replaceRange(text,curStart,tmp)}var curFinalPos={line:curStart.line,ch:finalCh};cm.setCursor(curFinalPos)})},newLineAndEnterInsertMode:function(cm,actionArgs){var insertAt=cm.getCursor();if(insertAt.line===cm.firstLine()&&!actionArgs.after){cm.replaceRange("\n",{line:cm.firstLine(),ch:0});cm.setCursor(cm.firstLine(),0)}else{insertAt.line=actionArgs.after?insertAt.line:insertAt.line-1;insertAt.ch=lineLength(cm,insertAt.line);cm.setCursor(insertAt);var newlineFn=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;newlineFn(cm)}this.enterInsertMode(cm)},paste:function(cm,actionArgs,vim){var cur=cm.getCursor();var register=getVimGlobalState().registerController.getRegister(actionArgs.registerName);if(!register.text){return}for(var text="",i=0;i<actionArgs.repeat;i++){text+=register.text}var linewise=register.linewise;if(linewise){if(actionArgs.after){text="\n"+text.slice(0,text.length-1);cur.ch=lineLength(cm,cur.line)}else{cur.ch=0}}else{cur.ch+=actionArgs.after?1:0}cm.replaceRange(text,cur);var curPosFinal;var idx;if(linewise&&actionArgs.after){curPosFinal={line:cur.line+1,ch:findFirstNonWhiteSpaceCharacter(cm.getLine(cur.line+1))}}else if(linewise&&!actionArgs.after){curPosFinal={line:cur.line,ch:findFirstNonWhiteSpaceCharacter(cm.getLine(cur.line))}}else if(!linewise&&actionArgs.after){idx=cm.indexFromPos(cur);curPosFinal=cm.posFromIndex(idx+text.length-1)}else{idx=cm.indexFromPos(cur);curPosFinal=cm.posFromIndex(idx+text.length)}cm.setCursor(curPosFinal)},undo:function(cm,actionArgs){repeatFn(cm,CodeMirror.commands.undo,actionArgs.repeat)()},redo:function(cm,actionArgs){repeatFn(cm,CodeMirror.commands.redo,actionArgs.repeat)()},setRegister:function(cm,actionArgs,vim){vim.inputState.registerName=actionArgs.selectedCharacter},setMark:function(cm,actionArgs,vim){var markName=actionArgs.selectedCharacter;updateMark(cm,vim,markName,cm.getCursor())},replace:function(cm,actionArgs,vim){var replaceWith=actionArgs.selectedCharacter;var curStart=cm.getCursor();var replaceTo;var curEnd;if(vim.visualMode){curStart=cm.getCursor("start");curEnd=cm.getCursor("end");curEnd=cm.clipPos({line:curEnd.line,ch:curEnd.ch+1})}else{var line=cm.getLine(curStart.line);replaceTo=curStart.ch+actionArgs.repeat;if(replaceTo>line.length){replaceTo=line.length}curEnd={line:curStart.line,ch:replaceTo}}if(replaceWith=="\n"){if(!vim.visualMode)cm.replaceRange("",curStart,curEnd);(CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent)(cm)}else{var replaceWithStr=cm.getRange(curStart,curEnd);replaceWithStr=replaceWithStr.replace(/[^\n]/g,replaceWith);cm.replaceRange(replaceWithStr,curStart,curEnd);if(vim.visualMode){cm.setCursor(curStart);exitVisualMode(cm,vim)}else{cm.setCursor(offsetCursor(curEnd,0,-1))}}},repeatLastEdit:function(cm,actionArgs,vim){var lastEdit=vim.lastEdit;if(lastEdit){if(actionArgs.repeat&&actionArgs.repeatIsExplicit){vim.lastEdit.repeatOverride=actionArgs.repeat}var currentInputState=vim.inputState;vim.inputState=vim.lastEdit;commandDispatcher.evalInput(cm,vim);vim.inputState=currentInputState}}};var textObjects={w:function(cm,inclusive){return expandWordUnderCursor(cm,inclusive,true,false)},W:function(cm,inclusive){return expandWordUnderCursor(cm,inclusive,true,true)},"{":function(cm,inclusive){return selectCompanionObject(cm,"}",inclusive)},"(":function(cm,inclusive){return selectCompanionObject(cm,")",inclusive)},"[":function(cm,inclusive){return selectCompanionObject(cm,"]",inclusive)},"'":function(cm,inclusive){return findBeginningAndEnd(cm,"'",inclusive)},'"':function(cm,inclusive){return findBeginningAndEnd(cm,'"',inclusive)}};function clipCursorToContent(cm,cur,includeLineBreak){var line=Math.min(Math.max(cm.firstLine(),cur.line),cm.lastLine());var maxCh=lineLength(cm,line)-1;maxCh=includeLineBreak?maxCh+1:maxCh;var ch=Math.min(Math.max(0,cur.ch),maxCh);return{line:line,ch:ch}}function mergeArgs(to,from){for(var prop in from){if(from.hasOwnProperty(prop)){to[prop]=from[prop]}}}function copyArgs(args){var ret={};for(var prop in args){if(args.hasOwnProperty(prop)){ret[prop]=args[prop]}}return ret}function offsetCursor(cur,offsetLine,offsetCh){return{line:cur.line+offsetLine,ch:cur.ch+offsetCh}}function arrayEq(a1,a2){if(a1.length!=a2.length){return false}for(var i=0;i<a1.length;i++){if(a1[i]!=a2[i]){return false}}return true}function matchKeysPartial(pressed,mapped){for(var i=0;i<pressed.length;i++){if(pressed[i]!=mapped[i]&&mapped[i]!="character"){return false}}return true}function arrayIsSubsetFromBeginning(small,big){for(var i=0;i<small.length;i++){if(small[i]!=big[i]){return false}}return true}function repeatFn(cm,fn,repeat){return function(){for(var i=0;i<repeat;i++){fn(cm)}}}function copyCursor(cur){return{line:cur.line,ch:cur.ch}}function cursorEqual(cur1,cur2){return cur1.ch==cur2.ch&&cur1.line==cur2.line}function cursorIsBefore(cur1,cur2){if(cur1.line<cur2.line){return true}else if(cur1.line==cur2.line&&cur1.ch<cur2.ch){return true}return false}function cusrorIsBetween(cur1,cur2,cur3){var cur1before2=cursorIsBefore(cur1,cur2);var cur2before3=cursorIsBefore(cur2,cur3);return cur1before2&&cur2before3}function lineLength(cm,lineNum){return cm.getLine(lineNum).length}function reverse(s){return s.split("").reverse().join("")}function trim(s){if(s.trim){return s.trim()}else{return s.replace(/^\s+|\s+$/g,"")}}function escapeRegex(s){return s.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function exitVisualMode(cm,vim){vim.visualMode=false;vim.visualLine=false;var selectionStart=cm.getCursor("anchor");var selectionEnd=cm.getCursor("head");if(!cursorEqual(selectionStart,selectionEnd)){cm.setCursor(clipCursorToContent(cm,selectionEnd))}}function clipToLine(cm,curStart,curEnd){var selection=cm.getRange(curStart,curEnd);var lines=selection.split("\n");if(lines.length>1&&isWhiteSpaceString(lines.pop())){curEnd.line--;curEnd.ch=lineLength(cm,curEnd.line)}}function expandSelectionToLine(cm,curStart,curEnd){curStart.ch=0;curEnd.ch=0;curEnd.line++}function findFirstNonWhiteSpaceCharacter(text){if(!text){return 0}var firstNonWS=text.search(/\S/);return firstNonWS==-1?text.length:firstNonWS}function expandWordUnderCursor(cm,inclusive,forward,bigWord,noSymbol){var cur=cm.getCursor();var line=cm.getLine(cur.line);var idx=cur.ch;var textAfterIdx=line.substring(idx);var firstMatchedChar;if(noSymbol){firstMatchedChar=textAfterIdx.search(/\w/)}else{firstMatchedChar=textAfterIdx.search(/\S/)}if(firstMatchedChar==-1){return null}idx+=firstMatchedChar;textAfterIdx=line.substring(idx);var textBeforeIdx=line.substring(0,idx);var matchRegex;if(bigWord){matchRegex=/^\S+/}else{if(/\w/.test(line.charAt(idx))){matchRegex=/^\w+/}else{matchRegex=/^[^\w\s]+/}}var wordAfterRegex=matchRegex.exec(textAfterIdx);var wordStart=idx;var wordEnd=idx+wordAfterRegex[0].length-1;var wordBeforeRegex=matchRegex.exec(reverse(textBeforeIdx));if(wordBeforeRegex){wordStart-=wordBeforeRegex[0].length}if(inclusive){wordEnd++}return{start:{line:cur.line,ch:wordStart},end:{line:cur.line,ch:wordEnd}}}function findWord(cm,cur,forward,bigWord){var lineNum=cur.line;var pos=cur.ch;var line=cm.getLine(lineNum);var dir=forward?1:-1;var regexps=bigWord?bigWordRegexp:wordRegexp;while(true){var stop=dir>0?line.length:-1;var wordStart=stop,wordEnd=stop;while(pos!=stop){var foundWord=false;for(var i=0;i<regexps.length&&!foundWord;++i){if(regexps[i].test(line.charAt(pos))){wordStart=pos;while(pos!=stop&&regexps[i].test(line.charAt(pos))){pos+=dir}wordEnd=pos;foundWord=wordStart!=wordEnd;if(wordStart==cur.ch&&lineNum==cur.line&&wordEnd==wordStart+dir){continue}else{return{from:Math.min(wordStart,wordEnd+1),to:Math.max(wordStart,wordEnd),line:lineNum}}}}if(!foundWord){pos+=dir}}lineNum+=dir;if(!isLine(cm,lineNum)){return null}line=cm.getLine(lineNum);pos=dir>0?0:line.length}throw"The impossible happened."}function moveToWord(cm,repeat,forward,wordEnd,bigWord){var cur=cm.getCursor();for(var i=0;i<repeat;i++){var startCh=cur.ch,startLine=cur.line,word;var movedToNextWord=false;while(!movedToNextWord){word=findWord(cm,cur,forward,bigWord);movedToNextWord=true;if(word){cur.line=word.line;if(forward&&wordEnd){cur.ch=word.to-1}else if(forward&&!wordEnd){if(inRangeInclusive(cur.ch,word.from,word.to)&&word.line==startLine){movedToNextWord=false;cur.ch=word.to-1}else{cur.ch=word.from}}else if(!forward&&wordEnd){if(inRangeInclusive(cur.ch,word.from,word.to)&&word.line==startLine){movedToNextWord=false;cur.ch=word.from}else{cur.ch=word.to}}else if(!forward&&!wordEnd){cur.ch=word.from}}else{if(forward){return{line:cur.line,ch:lineLength(cm,cur.line)}}else{return{line:cur.line,ch:0}}}}}return cur}function moveToCharacter(cm,repeat,forward,character){var cur=cm.getCursor();var start=cur.ch;var idx;for(var i=0;i<repeat;i++){var line=cm.getLine(cur.line);idx=charIdxInLine(start,line,character,forward,true);if(idx==-1){return null}start=idx}return{line:cm.getCursor().line,ch:idx}}function moveToColumn(cm,repeat){var line=cm.getCursor().line;return clipCursorToContent(cm,{line:line,ch:repeat-1})}function updateMark(cm,vim,markName,pos){if(!inArray(markName,validMarks)){return}if(vim.marks[markName]){vim.marks[markName].clear()}vim.marks[markName]=cm.setBookmark(pos)}function charIdxInLine(start,line,character,forward,includeChar){var idx;if(forward){idx=line.indexOf(character,start+1);if(idx!=-1&&!includeChar){idx-=1}}else{idx=line.lastIndexOf(character,start-1);if(idx!=-1&&!includeChar){idx+=1}}return idx}function findMatchedSymbol(cm,cur,symb){var line=cur.line;symb=symb?symb:cm.getLine(line).charAt(cur.ch);
var forwards=inArray(symb,["(","[","{"]);var reverseSymb={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{"}[symb];if(!reverseSymb){return cur}var increment={"(":1,"{":1,"[":1}[symb]||-1;var depth=1,nextCh=symb,index=cur.ch,lineText=cm.getLine(line);while(nextCh&&depth>0){index+=increment;nextCh=lineText.charAt(index);if(!nextCh){line+=increment;lineText=cm.getLine(line)||"";if(increment>0){index=0}else{var lineLen=lineText.length;index=lineLen>0?lineLen-1:0}nextCh=lineText.charAt(index)}if(nextCh===symb){depth++}else if(nextCh===reverseSymb){depth--}}if(nextCh){return{line:line,ch:index}}return cur}function selectCompanionObject(cm,revSymb,inclusive){var cur=cm.getCursor();var end=findMatchedSymbol(cm,cur,revSymb);var start=findMatchedSymbol(cm,end);start.ch+=inclusive?1:0;end.ch+=inclusive?0:1;return{start:start,end:end}}function regexLastIndexOf(string,pattern,startIndex){for(var i=!startIndex?string.length:startIndex;i>=0;--i){if(pattern.test(string.charAt(i))){return i}}return-1}function findBeginningAndEnd(cm,symb,inclusive){var cur=cm.getCursor();var line=cm.getLine(cur.line);var chars=line.split("");var start,end,i,len;var firstIndex=chars.indexOf(symb);if(cur.ch<firstIndex){cur.ch=firstIndex}else if(firstIndex<cur.ch&&chars[cur.ch]==symb){end=cur.ch;--cur.ch}if(chars[cur.ch]==symb&&!end){start=cur.ch+1}else{for(i=cur.ch;i>-1&&!start;i--){if(chars[i]==symb){start=i+1}}}if(start&&!end){for(i=start,len=chars.length;i<len&&!end;i++){if(chars[i]==symb){end=i}}}if(!start||!end){return{start:cur,end:cur}}if(inclusive){--start;++end}return{start:{line:cur.line,ch:start},end:{line:cur.line,ch:end}}}function SearchState(){}SearchState.prototype={getQuery:function(){return getVimGlobalState().query},setQuery:function(query){getVimGlobalState().query=query},getOverlay:function(){return this.searchOverlay},setOverlay:function(overlay){this.searchOverlay=overlay},isReversed:function(){return getVimGlobalState().isReversed},setReversed:function(reversed){getVimGlobalState().isReversed=reversed}};function getSearchState(cm){var vim=getVimState(cm);return vim.searchState_||(vim.searchState_=new SearchState)}function dialog(cm,template,shortText,onClose,options){if(cm.openDialog){cm.openDialog(template,onClose,{bottom:true,value:options.value,onKeyDown:options.onKeyDown,onKeyUp:options.onKeyUp})}else{callback(prompt(shortText,""))}}function findUnescapedSlashes(str){var escapeNextChar=false;var slashes=[];for(var i=0;i<str.length;i++){var c=str.charAt(i);if(!escapeNextChar&&c=="/"){slashes.push(i)}escapeNextChar=c=="\\"}return slashes}function parseQuery(cm,query,ignoreCase,smartCase){if(query instanceof RegExp){return query}var slashes=findUnescapedSlashes(query);var regexPart;var forceIgnoreCase;if(!slashes.length){regexPart=query}else{regexPart=query.substring(0,slashes[0]);var flagsPart=query.substring(slashes[0]);forceIgnoreCase=flagsPart.indexOf("i")!=-1}if(!regexPart){return null}if(smartCase){ignoreCase=/^[^A-Z]*$/.test(regexPart)}var regexp=new RegExp(regexPart,ignoreCase||forceIgnoreCase?"i":undefined);return regexp}function showConfirm(cm,text){if(cm.openConfirm){cm.openConfirm('<span style="color: red">'+text+'</span> <button type="button">OK</button>',function(){},{bottom:true})}else{alert(text)}}function makePrompt(prefix,desc){var raw="";if(prefix){raw+='<span style="font-family: monospace">'+prefix+"</span>"}raw+='<input type="text"/> '+'<span style="color: #888">';if(desc){raw+='<span style="color: #888">';raw+=desc;raw+="</span>"}return raw}var searchPromptDesc="(Javascript regexp)";function showPrompt(cm,options){var shortText=(options.prefix||"")+" "+(options.desc||"");var prompt=makePrompt(options.prefix,options.desc);dialog(cm,prompt,shortText,options.onClose,options)}function regexEqual(r1,r2){if(r1 instanceof RegExp&&r2 instanceof RegExp){var props=["global","multiline","ignoreCase","source"];for(var i=0;i<props.length;i++){var prop=props[i];if(r1[prop]!==r2[prop]){return false}}return true}return false}function updateSearchQuery(cm,rawQuery,ignoreCase,smartCase){if(!rawQuery){return}var state=getSearchState(cm);var query=parseQuery(cm,rawQuery,!!ignoreCase,!!smartCase);if(!query){return}highlightSearchMatches(cm,query);if(regexEqual(query,state.getQuery())){return query}state.setQuery(query);return query}function searchOverlay(query){if(query.source.charAt(0)=="^"){var matchSol=true}return{token:function(stream){if(matchSol&&!stream.sol()){stream.skipToEnd();return}var match=stream.match(query,false);if(match){if(match[0].length==0){stream.next();return}if(!stream.sol()){stream.backUp(1);if(!query.exec(stream.next()+match[0])){stream.next();return null}}stream.match(query);return"searching"}while(!stream.eol()){stream.next();if(stream.match(query,false))break}},query:query}}function highlightSearchMatches(cm,query){var overlay=getSearchState(cm).getOverlay();if(!overlay||query!=overlay.query){if(overlay){cm.removeOverlay(overlay)}overlay=searchOverlay(query);cm.addOverlay(overlay);getSearchState(cm).setOverlay(overlay)}}function findNext(cm,prev,query,repeat){if(repeat===undefined){repeat=1}return cm.operation(function(){var pos=cm.getCursor();if(!prev){pos.ch+=1}var cursor=cm.getSearchCursor(query,pos);for(var i=0;i<repeat;i++){if(!cursor.find(prev)){cursor=cm.getSearchCursor(query,prev?{line:cm.lastLine()}:{line:cm.firstLine(),ch:0});if(!cursor.find(prev)){return}}}return cursor.from()})}function clearSearchHighlight(cm){cm.removeOverlay(getSearchState(cm).getOverlay());getSearchState(cm).setOverlay(null)}function isInRange(pos,start,end){if(typeof pos!="number"){pos=pos.line}if(start instanceof Array){return inArray(pos,start)}else{if(end){return pos>=start&&pos<=end}else{return pos==start}}}var defaultExCommandMap=[{name:"map",type:"builtIn"},{name:"write",shortName:"w",type:"builtIn"},{name:"undo",shortName:"u",type:"builtIn"},{name:"redo",shortName:"red",type:"builtIn"},{name:"substitute",shortName:"s",type:"builtIn"},{name:"nohlsearch",shortName:"noh",type:"builtIn"},{name:"delmarks",shortName:"delm",type:"builtin"}];Vim.ExCommandDispatcher=function(){this.buildCommandMap_()};Vim.ExCommandDispatcher.prototype={processCommand:function(cm,input){var inputStream=new CodeMirror.StringStream(input);var params={};params.input=input;try{this.parseInput_(cm,inputStream,params)}catch(e){showConfirm(cm,e);return}var commandName;if(!params.commandName){if(params.line!==undefined){commandName="move"}}else{var command=this.matchCommand_(params.commandName);if(command){commandName=command.name;this.parseCommandArgs_(inputStream,params,command);if(command.type=="exToKey"){for(var i=0;i<command.toKeys.length;i++){vim.handleKey(cm,command.toKeys[i])}return}else if(command.type=="exToEx"){this.processCommand(cm,command.toInput);return}}}if(!commandName){showConfirm(cm,'Not an editor command ":'+input+'"');return}exCommands[commandName](cm,params)},parseInput_:function(cm,inputStream,result){inputStream.eatWhile(":");if(inputStream.eat("%")){result.line=cm.firstLine();result.lineEnd=cm.lastLine()}else{result.line=this.parseLineSpec_(cm,inputStream);if(result.line!==undefined&&inputStream.eat(",")){result.lineEnd=this.parseLineSpec_(cm,inputStream)}}var commandMatch=inputStream.match(/^(\w+)/);if(commandMatch){result.commandName=commandMatch[1]}else{result.commandName=inputStream.match(/.*/)[0]}return result},parseLineSpec_:function(cm,inputStream){var numberMatch=inputStream.match(/^(\d+)/);if(numberMatch){return parseInt(numberMatch[1],10)-1}switch(inputStream.next()){case".":return cm.getCursor().line;case"$":return cm.lastLine();case"'":var mark=getVimState(cm).marks[inputStream.next()];if(mark&&mark.find()){return mark.find().line}else{throw"Mark not set"}break;default:inputStream.backUp(1);return cm.getCursor().line}},parseCommandArgs_:function(inputStream,params,command){if(inputStream.eol()){return}params.argString=inputStream.match(/.*/)[0];var delim=command.argDelimiter||/\s+/;var args=trim(params.argString).split(delim);if(args.length&&args[0]){params.args=args}},matchCommand_:function(commandName){for(var i=commandName.length;i>0;i--){var prefix=commandName.substring(0,i);if(this.commandMap_[prefix]){var command=this.commandMap_[prefix];if(command.name.indexOf(commandName)===0){return command}}}return null},buildCommandMap_:function(){this.commandMap_={};for(var i=0;i<defaultExCommandMap.length;i++){var command=defaultExCommandMap[i];var key=command.shortName||command.name;this.commandMap_[key]=command}},map:function(lhs,rhs){if(lhs!=":"&&lhs.charAt(0)==":"){var commandName=lhs.substring(1);if(rhs!=":"&&rhs.charAt(0)==":"){this.commandMap_[commandName]={name:commandName,type:"exToEx",toInput:rhs.substring(1)}}else{this.commandMap_[commandName]={name:commandName,type:"exToKey",toKeys:parseKeyString(rhs)}}}else{if(rhs!=":"&&rhs.charAt(0)==":"){defaultKeymap.unshift({keys:parseKeyString(lhs),type:"keyToEx",exArgs:{input:rhs.substring(1)}})}else{defaultKeymap.unshift({keys:parseKeyString(lhs),type:"keyToKey",toKeys:parseKeyString(rhs)})}}}};function parseKeyString(str){var idx=0;var keys=[];while(idx<str.length){if(str.charAt(idx)!="<"){keys.push(str.charAt(idx));idx++;continue}var vimKeyNotationStart=++idx;while(str.charAt(idx++)!=">"){}var vimKeyNotation=str.substring(vimKeyNotationStart,idx-1);var mod="";var match=/^C-(.+)$/.exec(vimKeyNotation);if(match){mod="Ctrl-";vimKeyNotation=match[1]}var key;switch(vimKeyNotation){case"BS":key="Backspace";break;case"CR":key="Enter";break;case"Del":key="Delete";break;default:key=vimKeyNotation;break}keys.push(mod+key)}return keys}var exCommands={map:function(cm,params){var mapArgs=params.args;if(!mapArgs||mapArgs.length<2){if(cm){showConfirm(cm,"Invalid mapping: "+params.input)}return}exCommandDispatcher.map(mapArgs[0],mapArgs[1],cm)},move:function(cm,params){commandDispatcher.processCommand(cm,getVimState(cm),{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true},repeatOverride:params.line+1})},substitute:function(cm,params){var argString=params.argString;var slashes=findUnescapedSlashes(argString);if(slashes[0]!==0){showConfirm(cm,"Substitutions should be of the form "+":s/pattern/replace/");return}var regexPart=argString.substring(slashes[0]+1,slashes[1]);var replacePart="";var flagsPart;var count;if(slashes[1]){replacePart=argString.substring(slashes[1]+1,slashes[2])}if(slashes[2]){var trailing=argString.substring(slashes[2]+1).split(" ");flagsPart=trailing[0];count=parseInt(trailing[1])}if(flagsPart){regexPart=regexPart+"/"+flagsPart}if(regexPart){try{updateSearchQuery(cm,regexPart,true,true)}catch(e){showConfirm(cm,"Invalid regex: "+regexPart);return}}var state=getSearchState(cm);var query=state.getQuery();var lineStart=params.line||cm.firstLine();var lineEnd=params.lineEnd||lineStart;if(count){lineStart=lineEnd;lineEnd=lineStart+count-1}var startPos=clipCursorToContent(cm,{line:lineStart,ch:0});function doReplace(){for(var cursor=cm.getSearchCursor(query,startPos);cursor.findNext()&&isInRange(cursor.from(),lineStart,lineEnd);){var text=cm.getRange(cursor.from(),cursor.to());var newText=text.replace(query,replacePart);cursor.replace(newText)}var vim=getVimState(cm);if(vim.visualMode){exitVisualMode(cm,vim)}}cm.operation(doReplace)},redo:CodeMirror.commands.redo,undo:CodeMirror.commands.undo,write:function(cm){if(CodeMirror.commands.save){CodeMirror.commands.save(cm)}else{cm.save()}},nohlsearch:function(cm){clearSearchHighlight(cm)},delmarks:function(cm,params){if(!params.argString||!params.argString.trim()){showConfirm(cm,"Argument required");return}var state=getVimState(cm);var stream=new CodeMirror.StringStream(params.argString.trim());while(!stream.eol()){stream.eatSpace();var count=stream.pos;if(!stream.match(/[a-zA-Z]/,false)){showConfirm(cm,"Invalid argument: "+params.argString.substring(count));return}var sym=stream.next();if(stream.match("-",true)){if(!stream.match(/[a-zA-Z]/,false)){showConfirm(cm,"Invalid argument: "+params.argString.substring(count));return}var startMark=sym;var finishMark=stream.next();if(isLowerCase(startMark)&&isLowerCase(finishMark)||isUpperCase(startMark)&&isUpperCase(finishMark)){var start=startMark.charCodeAt(0);var finish=finishMark.charCodeAt(0);if(start>=finish){showConfirm(cm,"Invalid argument: "+params.argString.substring(count));return}for(var j=0;j<=finish-start;j++){var mark=String.fromCharCode(start+j);delete state.marks[mark]}}else{showConfirm(cm,"Invalid argument: "+startMark+"-");return}}else{delete state.marks[sym]}}}};var exCommandDispatcher=new Vim.ExCommandDispatcher;function buildVimKeyMap(){function handleKeyEvent_(cm,key,modifier){if(isUpperCase(key)){if(modifier=="Shift"){modifier=null}else{key=key.toLowerCase()}}if(modifier){key=modifier+"-"+key}vim.handleKey(cm,key)}function keyMapper(key,modifier){return function(cm){handleKeyEvent_(cm,key,modifier)}}var modifiers=["Shift","Ctrl"];var keyMap={nofallthrough:true,style:"fat-cursor"};function bindKeys(keys,modifier){for(var i=0;i<keys.length;i++){var key=keys[i];if(!modifier&&inArray(key,specialSymbols)){key="'"+key+"'"}if(modifier){keyMap[modifier+"-"+key]=keyMapper(keys[i],modifier)}else{keyMap[key]=keyMapper(keys[i])}}}bindKeys(upperCaseAlphabet);bindKeys(upperCaseAlphabet,"Shift");bindKeys(upperCaseAlphabet,"Ctrl");bindKeys(specialSymbols);bindKeys(specialSymbols,"Ctrl");bindKeys(numbers);bindKeys(numbers,"Ctrl");bindKeys(specialKeys);bindKeys(specialKeys,"Ctrl");return keyMap}CodeMirror.keyMap.vim=buildVimKeyMap();function exitInsertMode(cm){cm.setCursor(cm.getCursor().line,cm.getCursor().ch-1,true);cm.setOption("keyMap","vim")}CodeMirror.keyMap["vim-insert"]={Esc:exitInsertMode,"Ctrl-[":exitInsertMode,"Ctrl-C":exitInsertMode,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(cm){var fn=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;fn(cm)},fallthrough:["default"]};return vimApi};var vim=Vim();CodeMirror.Vim=vim})();(function(){var killRing=[];function addToRing(str){killRing.push(str);if(killRing.length>50)killRing.shift()}function getFromRing(){return killRing[killRing.length-1]||""}function popFromRing(){if(killRing.length>1)killRing.pop();return getFromRing()}CodeMirror.keyMap.emacs={"Ctrl-X":function(cm){cm.setOption("keyMap","emacs-Ctrl-X")},"Ctrl-W":function(cm){addToRing(cm.getSelection());cm.replaceSelection("")},"Ctrl-Alt-W":function(cm){addToRing(cm.getSelection());cm.replaceSelection("")},"Alt-W":function(cm){addToRing(cm.getSelection())},"Ctrl-Y":function(cm){cm.replaceSelection(getFromRing())},"Alt-Y":function(cm){cm.replaceSelection(popFromRing())},"Ctrl-/":"undo","Shift-Ctrl--":"undo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":"clearSearch","Shift-Alt-5":"replace","Ctrl-Z":"undo","Cmd-Z":"undo","Alt-/":"autocomplete","Alt-V":"goPageUp","Ctrl-J":"newlineAndIndent",Enter:false,Tab:"indentAuto",fallthrough:["basic","emacsy"]};CodeMirror.keyMap["emacs-Ctrl-X"]={"Ctrl-S":"save","Ctrl-W":"save",S:"saveAll",F:"open",U:"undo",K:"close",auto:"emacs",nofallthrough:true}})();CodeMirror.validate=function(){var GUTTER_ID="CodeMirror-lint-markers";var SEVERITIES=/^(?:error|warning)$/;function showTooltip(e,content){var tt=document.createElement("div");tt.className="CodeMirror-lint-tooltip";tt.appendChild(content.cloneNode(true));document.body.appendChild(tt);function position(e){if(!tt.parentNode)return CodeMirror.off(document,"mousemove",position);tt.style.top=e.clientY-tt.offsetHeight-5+"px";tt.style.left=e.clientX+5+"px"}CodeMirror.on(document,"mousemove",position);position(e);tt.style.opacity=1;return tt}function rm(elt){if(elt.parentNode)elt.parentNode.removeChild(elt)}function hideTooltip(tt){if(!tt.parentNode)return;if(tt.style.opacity==null)rm(tt);tt.style.opacity=0;setTimeout(function(){rm(tt)},600)}function LintState(cm,options,hasGutter){this.marked=[];this.options=options;this.timeout=null;this.hasGutter=hasGutter;this.onMouseOver=function(e){onMouseOver(cm,e)}}function parseOptions(options){if(options instanceof Function)return{getAnnotations:options};else if(!options||!options.getAnnotations)throw new Error("Required option 'getAnnotations' missing (lint addon)");return options}function clearMarks(cm){var state=cm._lintState;if(state.hasGutter)cm.clearGutter(GUTTER_ID);for(var i=0;i<state.marked.length;++i)state.marked[i].clear();state.marked.length=0}function makeMarker(labels,severity,multiple){var marker=document.createElement("div"),inner=marker;marker.className="CodeMirror-lint-marker-"+severity;if(multiple){inner=marker.appendChild(document.createElement("div"));inner.className="CodeMirror-lint-marker-multiple"}var tooltip;CodeMirror.on(inner,"mouseover",function(e){tooltip=showTooltip(e,labels)});CodeMirror.on(inner,"mouseout",function(){if(tooltip)hideTooltip(tooltip)});return marker}function getMaxSeverity(a,b){if(a=="error")return a;else return b}function groupByLine(annotations){var lines=[];for(var i=0;i<annotations.length;++i){var ann=annotations[i],line=ann.from.line;(lines[line]||(lines[line]=[])).push(ann)}return lines}function annotationTooltip(ann){var severity=ann.severity;if(!SEVERITIES.test(severity))severity="error";var tip=document.createElement("div");tip.className="CodeMirror-lint-message-"+severity;tip.appendChild(document.createTextNode(ann.message));return tip}function startLinting(cm){var state=cm._lintState,options=state.options;if(options.async)options.getAnnotations(cm,updateLinting,options);else updateLinting(cm,options.getAnnotations(cm.getValue()))}function updateLinting(cm,annotationsNotSorted){clearMarks(cm);var state=cm._lintState,options=state.options;var annotations=groupByLine(annotationsNotSorted);for(var line=0;line<annotations.length;++line){var anns=annotations[line];if(!anns)continue;var maxSeverity=null;var tipLabel=state.hasGutter&&document.createDocumentFragment();for(var i=0;i<anns.length;++i){var ann=anns[i];var severity=ann.severity;if(!SEVERITIES.test(severity))severity="error";maxSeverity=getMaxSeverity(maxSeverity,severity);if(options.formatAnnotation)ann=options.formatAnnotation(ann);if(state.hasGutter)tipLabel.appendChild(annotationTooltip(ann));if(ann.to)state.marked.push(cm.markText(ann.from,ann.to,{className:"CodeMirror-lint-span-"+severity,__annotation:ann}))}if(state.hasGutter)cm.setGutterMarker(line,GUTTER_ID,makeMarker(tipLabel,maxSeverity,anns.length>1))}if(options.onUpdateLinting)options.onUpdateLinting(annotationsNotSorted,annotations,cm)}function onChange(cm){var state=cm._lintState;clearTimeout(state.timeout);state.timeout=setTimeout(function(){startLinting(cm)},state.options.delay||500)}function popupSpanTooltip(ann,e){var tooltip=showTooltip(e,annotationTooltip(ann));var target=e.target||e.srcElement;CodeMirror.on(target,"mouseout",hide);function hide(){CodeMirror.off(target,"mouseout",hide);hideTooltip(tooltip)}}var nearby=[0,0,0,5,0,-5,5,0,-5,0];function onMouseOver(cm,e){if(!/\bCodeMirror-lint-span-/.test((e.target||e.srcElement).className))return;for(var i=0;i<nearby.length;i+=2){var spans=cm.findMarksAt(cm.coordsChar({left:e.clientX+nearby[i],top:e.clientY+nearby[i+1]}));for(var j=0;j<spans.length;++j){var span=spans[j],ann=span.__annotation;if(ann)return popupSpanTooltip(ann,e)}}}CodeMirror.defineOption("lintWith",false,function(cm,val,old){if(old&&old!=CodeMirror.Init){clearMarks(cm);cm.off("change",onChange);CodeMirror.off(cm.getWrapperElement(),"mouseover",cm._lintState.onMouseOver);delete cm._lintState}if(val){var gutters=cm.getOption("gutters"),hasLintGutter=false;for(var i=0;i<gutters.length;++i)if(gutters[i]==GUTTER_ID)hasLintGutter=true;var state=cm._lintState=new LintState(cm,parseOptions(val),hasLintGutter);cm.on("change",onChange);CodeMirror.on(cm.getWrapperElement(),"mouseover",state.onMouseOver);startLinting(cm)}})}();(function(){var bogus=["Dangerous comment"];var warnings=[["Expected '{'","Statement body should be inside '{ }' braces."]];var errors=["Missing semicolon","Extra comma","Missing property name","Unmatched "," and instead saw"," is not defined","Unclosed string","Stopping, unable to continue"];function validator(options,text){JSHINT(text,options);var errors=JSHINT.data().errors,result=[];if(errors)parseErrors(errors,result);return result}CodeMirror.javascriptValidatorWithOptions=function(options){return function(text){return validator(options,text)}};CodeMirror.javascriptValidator=CodeMirror.javascriptValidatorWithOptions(null);function cleanup(error){fixWith(error,warnings,"warning",true);fixWith(error,errors,"error");return isBogus(error)?null:error}function fixWith(error,fixes,severity,force){var description,fix,find,replace,found;description=error.description;for(var i=0;i<fixes.length;i++){fix=fixes[i];find=typeof fix==="string"?fix:fix[0];replace=typeof fix==="string"?null:fix[1];found=description.indexOf(find)!==-1;if(force||found){error.severity=severity}if(found&&replace){error.description=replace}}}function isBogus(error){var description=error.description;for(var i=0;i<bogus.length;i++){if(description.indexOf(bogus[i])!==-1){return true}}return false}function parseErrors(errors,output){for(var i=0;i<errors.length;i++){var error=errors[i];if(error){var linetabpositions,index;linetabpositions=[];if(error.evidence){var tabpositions=linetabpositions[error.line];if(!tabpositions){var evidence=error.evidence;tabpositions=[];Array.prototype.forEach.call(evidence,function(item,index){if(item==="	"){tabpositions.push(index+1)}});linetabpositions[error.line]=tabpositions}if(tabpositions.length>0){var pos=error.character;tabpositions.forEach(function(tabposition){if(pos>tabposition)pos-=1});error.character=pos}}var start=error.character-1,end=start+1;if(error.evidence){index=error.evidence.substring(start).search(/.\b/);if(index>-1){end+=index}}error.description=error.reason;error.start=error.character;error.end=end;error=cleanup(error);if(error)output.push({message:error.description,severity:error.severity,from:CodeMirror.Pos(error.line-1,start),to:CodeMirror.Pos(error.line-1,end)})}}}})();CodeMirror.jsonValidator=function(text){var found=[];jsonlint.parseError=function(str,hash){var loc=hash.loc;found.push({from:CodeMirror.Pos(loc.first_line-1,loc.first_column),to:CodeMirror.Pos(loc.last_line-1,loc.last_column),message:str})};try{jsonlint.parse(text)}catch(e){}return found};(function(){var Pos=CodeMirror.Pos;function SearchCursor(cm,query,pos,caseFold){this.atOccurrence=false;this.cm=cm;if(caseFold==null&&typeof query=="string")caseFold=false;pos=pos?cm.clipPos(pos):Pos(0,0);this.pos={from:pos,to:pos};if(typeof query!="string"){if(!query.global)query=new RegExp(query.source,query.ignoreCase?"ig":"g");this.matches=function(reverse,pos){if(reverse){query.lastIndex=0;var line=cm.getLine(pos.line).slice(0,pos.ch),cutOff=0,match,start;for(;;){query.lastIndex=cutOff;var newMatch=query.exec(line);if(!newMatch)break;match=newMatch;start=match.index;cutOff=match.index+1}}else{query.lastIndex=pos.ch;var line=cm.getLine(pos.line),match=query.exec(line),start=match&&match.index}if(match&&match[0])return{from:Pos(pos.line,start),to:Pos(pos.line,start+match[0].length),match:match}}}else{if(caseFold)query=query.toLowerCase();var fold=caseFold?function(str){return str.toLowerCase()}:function(str){return str};var target=query.split("\n");if(target.length==1){if(!query.length){this.matches=function(){}}else{this.matches=function(reverse,pos){var line=fold(cm.getLine(pos.line)),len=query.length,match;if(reverse?pos.ch>=len&&(match=line.lastIndexOf(query,pos.ch-len))!=-1:(match=line.indexOf(query,pos.ch))!=-1)return{from:Pos(pos.line,match),to:Pos(pos.line,match+len)}}}}else{this.matches=function(reverse,pos){var ln=pos.line,idx=reverse?target.length-1:0,match=target[idx],line=fold(cm.getLine(ln));var offsetA=reverse?line.indexOf(match)+match.length:line.lastIndexOf(match);if(reverse?offsetA>=pos.ch||offsetA!=match.length:offsetA<=pos.ch||offsetA!=line.length-match.length)return;for(;;){if(reverse?!ln:ln==cm.lineCount()-1)return;line=fold(cm.getLine(ln+=reverse?-1:1));match=target[reverse?--idx:++idx];if(idx>0&&idx<target.length-1){if(line!=match)return;else continue}var offsetB=reverse?line.lastIndexOf(match):line.indexOf(match)+match.length;if(reverse?offsetB!=line.length-match.length:offsetB!=match.length)return;var start=Pos(pos.line,offsetA),end=Pos(ln,offsetB);return{from:reverse?end:start,to:reverse?start:end}}}}}}SearchCursor.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(reverse){var self=this,pos=this.cm.clipPos(reverse?this.pos.from:this.pos.to);function savePosAndFail(line){var pos=Pos(line,0);self.pos={from:pos,to:pos};self.atOccurrence=false;return false}for(;;){if(this.pos=this.matches(reverse,pos)){if(!this.pos.from||!this.pos.to){console.log(this.matches,this.pos)}this.atOccurrence=true;return this.pos.match||true}if(reverse){if(!pos.line)return savePosAndFail(0);pos=Pos(pos.line-1,this.cm.getLine(pos.line-1).length)}else{var maxLine=this.cm.lineCount();if(pos.line==maxLine-1)return savePosAndFail(maxLine);pos=Pos(pos.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(newText){if(!this.atOccurrence)return;var lines=CodeMirror.splitLines(newText);this.cm.replaceRange(lines,this.pos.from,this.pos.to);this.pos.to=Pos(this.pos.from.line+lines.length-1,lines[lines.length-1].length+(lines.length==1?this.pos.from.ch:0))}};CodeMirror.defineExtension("getSearchCursor",function(query,pos,caseFold){return new SearchCursor(this,query,pos,caseFold)})})();(function(){function searchOverlay(query){if(typeof query=="string")return{token:function(stream){if(stream.match(query))return"searching";stream.next();stream.skipTo(query.charAt(0))||stream.skipToEnd()}};return{token:function(stream){if(stream.match(query))return"searching";while(!stream.eol()){stream.next();if(stream.match(query,false))break}}}}function SearchState(){this.posFrom=this.posTo=this.query=null;this.overlay=null}function getSearchState(cm){return cm._searchState||(cm._searchState=new SearchState)}function getSearchCursor(cm,query,pos){return cm.getSearchCursor(query,pos,typeof query=="string"&&query==query.toLowerCase())}function dialog(cm,text,shortText,f){if(cm.openDialog)cm.openDialog(text,f);else f(prompt(shortText,""))}function confirmDialog(cm,text,shortText,fs){if(cm.openConfirm)cm.openConfirm(text,fs);else if(confirm(shortText))fs[0]()}function parseQuery(query){var isRE=query.match(/^\/(.*)\/([a-z]*)$/);return isRE?new RegExp(isRE[1],isRE[2].indexOf("i")==-1?"":"i"):query}var queryDialog='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';function doSearch(cm,rev){var state=getSearchState(cm);if(state.query)return findNext(cm,rev);dialog(cm,queryDialog,"Search for:",function(query){cm.operation(function(){if(!query||state.query)return;state.query=parseQuery(query);cm.removeOverlay(state.overlay);state.overlay=searchOverlay(query);cm.addOverlay(state.overlay);state.posFrom=state.posTo=cm.getCursor();findNext(cm,rev)})})}function findNext(cm,rev){cm.operation(function(){var state=getSearchState(cm);var cursor=getSearchCursor(cm,state.query,rev?state.posFrom:state.posTo);if(!cursor.find(rev)){cursor=getSearchCursor(cm,state.query,rev?CodeMirror.Pos(cm.lastLine()):CodeMirror.Pos(cm.firstLine(),0));if(!cursor.find(rev))return}cm.setSelection(cursor.from(),cursor.to());state.posFrom=cursor.from();state.posTo=cursor.to()})}function clearSearch(cm){cm.operation(function(){var state=getSearchState(cm);if(!state.query)return;state.query=null;cm.removeOverlay(state.overlay)})}var replaceQueryDialog='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';var replacementQueryDialog='With: <input type="text" style="width: 10em"/>';var doReplaceConfirm="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";function replace(cm,all){dialog(cm,replaceQueryDialog,"Replace:",function(query){if(!query)return;query=parseQuery(query);dialog(cm,replacementQueryDialog,"Replace with:",function(text){if(all){cm.operation(function(){for(var cursor=getSearchCursor(cm,query);cursor.findNext();){if(typeof query!="string"){var match=cm.getRange(cursor.from(),cursor.to()).match(query);cursor.replace(text.replace(/\$(\d)/,function(_,i){return match[i]}))}else cursor.replace(text)}})}else{clearSearch(cm);var cursor=getSearchCursor(cm,query,cm.getCursor());var advance=function(){var start=cursor.from(),match;if(!(match=cursor.findNext())){cursor=getSearchCursor(cm,query);if(!(match=cursor.findNext())||start&&cursor.from().line==start.line&&cursor.from().ch==start.ch)return}cm.setSelection(cursor.from(),cursor.to());confirmDialog(cm,doReplaceConfirm,"Replace?",[function(){doReplace(match)},advance])};var doReplace=function(match){cursor.replace(typeof query=="string"?text:text.replace(/\$(\d)/,function(_,i){return match[i]}));advance()};advance()}})})}CodeMirror.commands.find=function(cm){clearSearch(cm);doSearch(cm)};CodeMirror.commands.findNext=doSearch;CodeMirror.commands.findPrev=function(cm){doSearch(cm,true)};CodeMirror.commands.clearSearch=clearSearch;CodeMirror.commands.replace=replace;CodeMirror.commands.replaceAll=function(cm){replace(cm,true)}})();(function(){function dialogDiv(cm,template,bottom){var wrap=cm.getWrapperElement();var dialog;dialog=wrap.appendChild(document.createElement("div"));if(bottom){dialog.className="CodeMirror-dialog CodeMirror-dialog-bottom"}else{dialog.className="CodeMirror-dialog CodeMirror-dialog-top"}dialog.innerHTML=template;return dialog}CodeMirror.defineExtension("openDialog",function(template,callback,options){var dialog=dialogDiv(this,template,options&&options.bottom);var closed=false,me=this;function close(){if(closed)return;closed=true;dialog.parentNode.removeChild(dialog)}var inp=dialog.getElementsByTagName("input")[0],button;if(inp){CodeMirror.on(inp,"keydown",function(e){if(options&&options.onKeyDown&&options.onKeyDown(e,inp.value,close)){return}if(e.keyCode==13||e.keyCode==27){CodeMirror.e_stop(e);close();me.focus();if(e.keyCode==13)callback(inp.value)}});if(options&&options.onKeyUp){CodeMirror.on(inp,"keyup",function(e){options.onKeyUp(e,inp.value,close)})}if(options&&options.value)inp.value=options.value;inp.focus();CodeMirror.on(inp,"blur",close)}else if(button=dialog.getElementsByTagName("button")[0]){CodeMirror.on(button,"click",function(){close();me.focus()});button.focus();CodeMirror.on(button,"blur",close)}return close});CodeMirror.defineExtension("openConfirm",function(template,callbacks,options){var dialog=dialogDiv(this,template,options&&options.bottom);var buttons=dialog.getElementsByTagName("button");var closed=false,me=this,blurring=1;function close(){if(closed)return;closed=true;dialog.parentNode.removeChild(dialog);me.focus()}buttons[0].focus();for(var i=0;i<buttons.length;++i){var b=buttons[i];(function(callback){CodeMirror.on(b,"click",function(e){CodeMirror.e_preventDefault(e);close();if(callback)callback(me)})})(callbacks[i]);CodeMirror.on(b,"blur",function(){--blurring;setTimeout(function(){if(blurring<=0)close()},200)});CodeMirror.on(b,"focus",function(){++blurring})}})})();CodeMirror.runMode=function(string,modespec,callback,options){var mode=CodeMirror.getMode(CodeMirror.defaults,modespec);if(callback.nodeType==1){var tabSize=options&&options.tabSize||CodeMirror.defaults.tabSize;var node=callback,col=0;node.innerHTML="";callback=function(text,style){if(text=="\n"){node.appendChild(document.createElement("br"));col=0;return}var content="";for(var pos=0;;){var idx=text.indexOf("	",pos);if(idx==-1){content+=text.slice(pos);col+=text.length-pos;break}else{col+=idx-pos;content+=text.slice(pos,idx);var size=tabSize-col%tabSize;col+=size;for(var i=0;i<size;++i)content+=" ";pos=idx+1}}if(style){var sp=node.appendChild(document.createElement("span"));
sp.className="cm-"+style.replace(/ +/g," cm-");sp.appendChild(document.createTextNode(content))}else{node.appendChild(document.createTextNode(content))}}}var lines=CodeMirror.splitLines(string),state=CodeMirror.startState(mode);for(var i=0,e=lines.length;i<e;++i){if(i)callback("\n");var stream=new CodeMirror.StringStream(lines[i]);while(!stream.eol()){var style=mode.token(stream,state);callback(stream.current(),style,i,stream.start);stream.start=stream.pos}}};